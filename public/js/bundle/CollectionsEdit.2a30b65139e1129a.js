/*! For license information please see CollectionsEdit.2a30b65139e1129a.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9710],{15963:(t,e,r)=>{r.r(e),r.d(e,{default:()=>f});function i(){var t,e,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",s=r.toStringTag||"@@toStringTag";function o(r,i,a,s){var o=i&&i.prototype instanceof d?i:d,l=Object.create(o.prototype);return n(l,"_invoke",function(r,i,n){var a,s,o,d=0,l=n||[],u=!1,f={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,r){return a=e,s=0,o=t,f.n=r,c}};function v(r,i){for(s=r,o=i,e=0;!u&&d&&!n&&e<l.length;e++){var n,a=l[e],v=f.p,p=a[2];r>3?(n=p===i)&&(o=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=v&&((n=r<2&&v<a[1])?(s=0,f.v=i,f.n=a[1]):v<p&&(n=r<3||a[0]>i||i>p)&&(a[4]=r,a[5]=i,f.n=p,s=0))}if(n||r>1)return c;throw u=!0,i}return function(n,l,p){if(d>1)throw TypeError("Generator is already running");for(u&&1===l&&v(l,p),s=l,o=p;(e=s<2?t:o)||!u;){a||(s?s<3?(s>1&&(f.n=-1),v(s,o)):f.n=o:f.v=o);try{if(d=2,a){if(s||(n="next"),e=a[n]){if(!(e=e.call(a,o)))throw TypeError("iterator result is not an object");if(!e.done)return e;o=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(o=TypeError("The iterator does not provide a '"+n+"' method"),s=1);a=t}else if((e=(u=f.n<0)?o:r.call(i,f))!==c)break}catch(e){a=t,s=1,o=e}finally{d=1}}return{value:e,done:u}}}(r,a,s),!0),l}var c={};function d(){}function l(){}function u(){}e=Object.getPrototypeOf;var f=[][a]?e(e([][a]())):(n(e={},a,function(){return this}),e),v=u.prototype=d.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,n(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t}return l.prototype=u,n(v,"constructor",u),n(u,"constructor",l),l.displayName="GeneratorFunction",n(u,s,"GeneratorFunction"),n(v),n(v,s,"Generator"),n(v,a,function(){return this}),n(v,"toString",function(){return"[object Generator]"}),(i=function(){return{w:o,m:p}})()}function n(t,e,r,i){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}n=function(t,e,r,i){function s(e,r){n(t,e,function(t){return this._invoke(e,r,t)})}e?a?a(t,e,{value:r,enumerable:!i,configurable:!i,writable:!i}):t[e]=r:(s("next",0),s("throw",1),s("return",2))},n(t,e,r,i)}function a(t,e,r,i,n,a,s){try{var o=t[a](s),c=o.value}catch(t){return void r(t)}o.done?e(c):Promise.resolve(c).then(i,n)}function s(t){return function(){var e=this,r=arguments;return new Promise(function(i,n){var s=t.apply(e,r);function o(t){a(s,i,n,o,c,"next",t)}function c(t){a(s,i,n,o,c,"throw",t)}o(void 0)})}}const o={metaInfo:{title:"Store Collections Edit"},props:{id:{type:[String,Number],required:!1}},data:function(){return{isLoading:!0,saving:!1,searching:!1,productQuery:"",results:[],form:{title:"",slug:"",description:"",limit:8,sort_order:0},selected:[],t:null}},mounted:function(){this.fetch()},methods:{makeToast:function(t,e,r){this.$root&&this.$root.$bvToast&&this.$root.$bvToast.toast(e,{title:r,variant:t,solid:!0})},slugify:function(t){return String(t||"").toLowerCase().trim().replace(/['"]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")},autoSlugIfEmpty:function(){this.form.slug||(this.form.slug=this.slugify(this.form.title))},fetch:function(){var t=this;return s(i().m(function e(){var r,n,a,s,o,c,d;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return t.isLoading=!0,e.p=1,r=t.id||t.$route.params.id,e.n=2,axios.get("/admin/store/collections/".concat(r));case 2:for(n=e.v,(a=n&&n.data&&n.data.data?n.data.data:n?n.data:null)||(a={}),t.form={title:a.title||"",slug:a.slug||"",description:a.description||"",limit:null!=a.limit?a.limit:8,sort_order:null!=a.sort_order?a.sort_order:0},s=Array.isArray(a.products)?a.products.slice():[],o={},c=0;c<s.length;c++)(d=s[c])&&d.id&&d.pivot&&(o[d.id]={sort_order:null!=d.pivot.sort_order?d.pivot.sort_order:0,pinned:!!d.pivot.pinned});t.selected=s.map(function(t){return{product_id:t.id,name:t.name||t.title||"#"+t.id,sku:t.sku||t.code||"",pinned:!(!t.pivot||!t.pivot.pinned)}}).sort(function(t,e){return(o[t.product_id]?o[t.product_id].sort_order:0)-(o[e.product_id]?o[e.product_id].sort_order:0)}),e.n=4;break;case 3:e.p=3,e.v,t.makeToast("danger",t.$t("Failed_to_load"),t.$t("Failed"));case 4:return e.p=4,t.isLoading=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}))()},debouncedSearch:function(){var t=this;this.t&&clearTimeout(this.t),this.t=setTimeout(function(){t.searchProducts()},300)},searchProducts:function(){var t=this;return s(i().m(function e(){var r,n,a,s,o;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=(t.productQuery||"").trim()){e.n=1;break}return t.results=[],e.a(2);case 1:return t.searching=!0,e.p=2,s=null,e.p=3,e.n=4,axios.get("/admin/store/products",{params:{q:r,limit:20}});case 4:s=e.v,e.n=6;break;case 5:e.p=5,e.v;case 6:o=Array.isArray(null===(n=s)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.data)?s.data.data:Array.isArray(null===(a=s)||void 0===a?void 0:a.data)?s.data:[],t.results=Array.isArray(o)?o:[],e.n=8;break;case 7:e.p=7,e.v,t.makeToast("danger",t.$t("Failed_to_load"),t.$t("Failed"));case 8:return e.p=8,t.searching=!1,e.f(8);case 9:return e.a(2)}},e,null,[[3,5],[2,7,8,9]])}))()},hasProduct:function(t){return this.selected.some(function(e){return e.product_id===t})},addProduct:function(t){t&&!this.hasProduct(t.id)&&this.selected.push({product_id:t.id,name:t.name?t.name:t.title?t.title:"#"+t.id,sku:t.sku||t.code||"",pinned:!1})},remove:function(t){this.selected.splice(t,1)},move:function(t,e){var r=t+e;if(!(r<0||r>=this.selected.length)){var i=this.selected.splice(t,1)[0];this.selected.splice(r,0,i)}},clearSelected:function(){this.selected.length&&confirm(this.$t("Confirm_Clear_All"))&&(this.selected=[])},itemsPayload:function(){return this.selected.map(function(t,e){return{product_id:t.product_id,sort_order:10*(e+1),pinned:!!t.pinned}})},update:function(){var t=this;return s(i().m(function e(){var r;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.form.title&&t.form.slug){e.n=1;break}return t.makeToast("danger",t.$t("Title_and_Slug_required"),t.$t("Invalid")),e.a(2);case 1:return t.saving=!0,e.p=2,r=t.id||t.$route.params.id,e.n=3,axios.put("/admin/store/collections/".concat(r),t.form);case 3:if(!t.selected.length){e.n=7;break}return e.p=4,e.n=5,axios.post("/admin/store/collections/".concat(r,"/products"),{items:t.itemsPayload()});case 5:e.n=7;break;case 6:e.p=6,e.v,t.makeToast("warning",t.$t("Collection_saved_but_products_not_synced"),t.$t("Warning"));case 7:t.makeToast("success",t.$t("Successfully_Updated"),t.$t("Success")),e.n=9;break;case 8:e.p=8,e.v,t.makeToast("danger",t.$t("InvalidData"),t.$t("Failed"));case 9:return e.p=9,t.saving=!1,e.f(9);case 10:return e.a(2)}},e,null,[[4,6],[2,8,9,10]])}))()},updateAndClose:function(){var t=this;return s(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.update();case 1:t.$router.push({name:"StoreCollections"});case 2:return e.a(2)}},e)}))()}}};var c=r(85072),d=r.n(c),l=r(67402),u={insert:"head",singleton:!1};d()(l.A,u);l.A.locals;const f=(0,r(14486).A)(o,function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("breadcumb",{attrs:{page:t.$t("Edit_Collection"),folder:t.$t("Store")}}),t._v(" "),t.isLoading?e("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):e("b-card",{staticClass:"px-0"},[e("b-form",{on:{submit:function(e){return e.preventDefault(),t.update.apply(null,arguments)}}},[e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"col-lg-8 p-3 p-lg-4"},[e("div",{staticClass:"card card-soft shadow-sm mb-4"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"d-flex align-items-center justify-content-between flex-wrap mb-2"},[e("h5",{staticClass:"mb-0"},[t._v(t._s(t.$t("Collection_Details")))])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-8"},[e("b-form-group",{attrs:{label:t.$t("Title")}},[e("b-form-input",{attrs:{required:""},on:{input:t.autoSlugIfEmpty},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title","string"==typeof e?e.trim():e)},expression:"form.title"}})],1)],1)]),t._v(" "),e("b-form-group",{attrs:{label:t.$t("Slug")}},[e("b-input-group",[e("b-input-group-prepend",{attrs:{"is-text":""}},[t._v("/collections/")]),t._v(" "),e("b-form-input",{attrs:{required:""},model:{value:t.form.slug,callback:function(e){t.$set(t.form,"slug","string"==typeof e?e.trim():e)},expression:"form.slug"}})],1)],1),t._v(" "),e("b-form-group",{attrs:{label:t.$t("Description")}},[e("b-form-textarea",{attrs:{rows:"3"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description","string"==typeof e?e.trim():e)},expression:"form.description"}})],1),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"},[e("b-form-group",{attrs:{label:t.$t("Limit")}},[e("b-form-input",{attrs:{type:"text",min:"1"},model:{value:t.form.limit,callback:function(e){t.$set(t.form,"limit",t._n(e))},expression:"form.limit"}})],1)],1)])],1)])]),t._v(" "),e("div",{staticClass:"col-lg-4 p-3 p-lg-4"},[e("div",{staticClass:"side sticky-top"},[e("div",{staticClass:"card shadow-sm"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"d-grid gap-2"},[e("b-button",{attrs:{disabled:t.saving,type:"submit",variant:"btn btn-primary btn-block"}},[t.saving?e("span",{staticClass:"spinner-border spinner-border-sm mr-2"}):t._e(),t._v(" "),e("i",{staticClass:"i-Yes"}),t._v(" "+t._s(t.$t("Save"))+"\n                  ")]),t._v(" "),e("b-button",{attrs:{disabled:t.saving,variant:"btn btn-outline-secondary btn-block"},on:{click:t.updateAndClose}},[e("i",{staticClass:"i-Yes"}),t._v(" "+t._s(t.$t("Save_and_Close"))+"\n                  ")]),t._v(" "),e("router-link",{staticClass:"btn btn-outline-dark btn-block",attrs:{to:{name:"StoreCollections"}}},[t._v("\n                    "+t._s(t.$t("Cancel"))+"\n                  ")])],1)])]),t._v(" "),e("div",{staticClass:"helper mt-3"},[e("div",{staticClass:"small text-muted"},[t._v("\n                ðŸ’¡ "+t._s(t.$t("Tip_reorder_products_for_priority"))+"\n              ")])])])])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 p-3 p-lg-4"},[e("div",{staticClass:"card card-soft shadow-sm"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"d-flex align-items-center justify-content-between flex-wrap"},[e("h5",{staticClass:"mb-2"},[t._v(t._s(t.$t("Products_in_Collection")))]),t._v(" "),e("div",{staticClass:"small text-muted"},[t._v("\n                  "+t._s(t.selected.length)+" "+t._s(t.$t("selected"))+"\n                  "),t.form.limit?e("span",[t._v(" â€¢ "+t._s(t.$t("Display_limit"))+": "+t._s(t.form.limit))]):t._e()])]),t._v(" "),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-lg-6"},[e("div",{staticClass:"finder border rounded p-3"},[e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("b-input-group",[e("b-form-input",{attrs:{placeholder:t.$t("Search_products")+"â€¦"},on:{input:t.debouncedSearch},model:{value:t.productQuery,callback:function(e){t.productQuery="string"==typeof e?e.trim():e},expression:"productQuery"}}),t._v(" "),e("b-input-group-append",[e("b-button",{attrs:{disabled:t.searching,variant:"outline-secondary"},on:{click:t.searchProducts}},[t.searching?e("span",{staticClass:"spinner-border spinner-border-sm mr-1"}):e("i",{staticClass:"i-Search-People"})])],1)],1)],1),t._v(" "),t.searching||!t.productQuery||t.results.length?t._e():e("div",{staticClass:"small text-muted mt-1"},[t._v("\n                      "+t._s(t.$t("No_results"))+"\n                    ")]),t._v(" "),e("div",{staticClass:"results-list mt-3"},[t._l(t.results,function(r){return e("div",{key:"r-"+r.id,staticClass:"result-row"},[e("div",{staticClass:"d-flex align-items-center"},[e("div",{staticClass:"text-truncate"},[e("div",{staticClass:"fw-600"},[t._v("\n                              "+t._s(r.name?r.name:r.title?r.title:"#"+r.id)+"\n                            ")]),t._v(" "),e("div",{staticClass:"small text-muted"},[t._v("\n                              #"+t._s(r.id)+"\n                              "),r.code||r.sku?e("span",[t._v("â€¢ "+t._s(r.code||r.sku))]):t._e(),t._v(" "),Array.isArray(r.variants)&&r.variants.length?e("span",[t._v("â€¢ "+t._s(r.variants.length)+" "+t._s(t.$t("variants")))]):t._e()])])]),t._v(" "),e("div",[e("b-button",{attrs:{size:"sm",variant:"outline-primary",disabled:t.hasProduct(r.id)},on:{click:function(e){return t.addProduct(r)}}},[t._v("\n                            "+t._s(t.hasProduct(r.id)?t.$t("Added"):t.$t("Add"))+"\n                          ")])],1)])}),t._v(" "),t.productQuery||t.results.length||t.searching?t._e():e("div",{staticClass:"empty-state mt-3"},[e("div",{staticClass:"emoji"},[t._v("ðŸ”Ž")]),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("Start_typing_to_search")))]),t._v(" "),e("div",{staticClass:"subtitle"},[t._v(t._s(t.$t("Search_by_name_SKU_or_ID")))])])],2)])]),t._v(" "),e("div",{staticClass:"col-lg-6 mt-3 mt-lg-0"},[e("div",{staticClass:"border rounded p-3"},[t.selected.length?e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-sm align-middle"},[e("thead",[e("tr",[e("th",{staticStyle:{width:"60px"}},[t._v("#")]),t._v(" "),e("th",[t._v(t._s(t.$t("Product")))]),t._v(" "),e("th",{staticClass:"text-right",staticStyle:{width:"220px"}},[t._v(t._s(t.$t("Actions")))])])]),t._v(" "),e("tbody",t._l(t.selected,function(r,i){return e("tr",{key:"s-"+r.product_id},[e("td",[e("code",{staticClass:"small"},[t._v(t._s(i+1))])]),t._v(" "),e("td",[e("div",{staticClass:"d-flex align-items-center"},[r.thumb?e("div",{staticClass:"thumb mr-2"},[e("img",{attrs:{src:r.thumb,alt:"thumb"}})]):t._e(),t._v(" "),e("div",[e("div",{staticClass:"fw-600"},[t._v(t._s(r.name))]),t._v(" "),e("small",{staticClass:"text-muted"},[t._v("#"+t._s(r.product_id)+" "),r.sku?e("span",[t._v("â€¢ "+t._s(r.sku))]):t._e()])])])]),t._v(" "),e("td",{staticClass:"text-right"},[e("div",{staticClass:"btn-group btn-group-sm"},[e("b-button",{attrs:{variant:"outline-secondary",disabled:0===i},on:{click:function(e){return t.move(i,-1)}}},[t._v("â†‘")]),t._v(" "),e("b-button",{attrs:{variant:"outline-secondary",disabled:i===t.selected.length-1},on:{click:function(e){return t.move(i,1)}}},[t._v("â†“")]),t._v(" "),e("b-button",{attrs:{variant:"outline-danger"},on:{click:function(e){return t.remove(i)}}},[t._v(t._s(t.$t("Remove")))])],1)])])}),0)]),t._v(" "),e("div",{staticClass:"d-flex align-items-center justify-content-between mt-2"},[e("div",{staticClass:"small text-muted"},[t._v("\n                          "+t._s(t.$t("Order_determines_display_priority"))+"\n                        ")]),t._v(" "),e("div",[e("b-button",{attrs:{size:"sm",variant:"outline-danger",disabled:!t.selected.length},on:{click:t.clearSelected}},[t._v("\n                            "+t._s(t.$t("Clear_all"))+"\n                          ")])],1)])]):e("div",{staticClass:"empty-state"},[e("div",{staticClass:"emoji"},[t._v("ðŸ§º")]),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("No_products_in_collection_yet")))]),t._v(" "),e("div",{staticClass:"subtitle"},[t._v(t._s(t.$t("Use_search_to_add_products")))])])])])])])])])])])],1)],1)},[],!1,null,"72d70dfc",null).exports},67402:(t,e,r)=>{r.d(e,{A:()=>a});var i=r(76314),n=r.n(i)()(function(t){return t[1]});n.push([t.id,".text-mono[data-v-72d70dfc]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.card-soft[data-v-72d70dfc]{border:1px solid #edf2f7;border-radius:12px}.finder[data-v-72d70dfc]{background:#fbfbfd}.results-list[data-v-72d70dfc]{max-height:420px;overflow:auto}.result-row[data-v-72d70dfc]{align-items:center;border-bottom:1px dashed #e5e7eb;display:flex;gap:.75rem;justify-content:space-between;padding:.5rem 0}.result-row[data-v-72d70dfc]:last-child{border-bottom:0}.result-row .thumb[data-v-72d70dfc]{background:#f3f4f6;border:1px solid #eef2f7;border-radius:6px;height:40px;margin-right:.5rem;overflow:hidden;width:40px}.result-row .thumb img[data-v-72d70dfc]{height:100%;-o-object-fit:cover;object-fit:cover;width:100%}.table .thumb[data-v-72d70dfc]{background:#f3f4f6;border:1px solid #eef2f7;border-radius:6px;height:36px;overflow:hidden;width:36px}.table .thumb img[data-v-72d70dfc]{height:100%;-o-object-fit:cover;object-fit:cover;width:100%}.empty-state[data-v-72d70dfc]{background:#fafafa;border:2px dashed #e2e8f0;border-radius:1rem;padding:2rem;text-align:center}.empty-state .emoji[data-v-72d70dfc]{font-size:1.8rem}.empty-state .title[data-v-72d70dfc]{font-weight:700;margin-top:.25rem}.empty-state .subtitle[data-v-72d70dfc]{color:#6b7280}.side[data-v-72d70dfc]{top:88px}.btn-block[data-v-72d70dfc]{width:100%}.fw-600[data-v-72d70dfc]{font-weight:600}",""]);const a=n},76314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=t(e);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r}).join("")},e.i=function(t,r,i){"string"==typeof t&&(t=[[null,t,""]]);var n={};if(i)for(var a=0;a<this.length;a++){var s=this[a][0];null!=s&&(n[s]=!0)}for(var o=0;o<t.length;o++){var c=[].concat(t[o]);i&&n[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),e.push(c))}},e}},85072:(t,e,r)=>{var i,n=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},a=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}(),s=[];function o(t){for(var e=-1,r=0;r<s.length;r++)if(s[r].identifier===t){e=r;break}return e}function c(t,e){for(var r={},i=[],n=0;n<t.length;n++){var a=t[n],c=e.base?a[0]+e.base:a[0],d=r[c]||0,l="".concat(c," ").concat(d);r[c]=d+1;var u=o(l),f={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(s[u].references++,s[u].updater(f)):s.push({identifier:l,updater:_(f,e),references:1}),i.push(l)}return i}function d(t){var e=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var n=r.nc;n&&(i.nonce=n)}if(Object.keys(i).forEach(function(t){e.setAttribute(t,i[t])}),"function"==typeof t.insert)t.insert(e);else{var s=a(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var l,u=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function f(t,e,r,i){var n=r?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=u(e,n);else{var a=document.createTextNode(n),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(a,s[e]):t.appendChild(a)}}function v(t,e,r){var i=r.css,n=r.media,a=r.sourceMap;if(n?t.setAttribute("media",n):t.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var p=null,m=0;function _(t,e){var r,i,n;if(e.singleton){var a=m++;r=p||(p=d(e)),i=f.bind(null,r,a,!1),n=f.bind(null,r,a,!0)}else r=d(e),i=v.bind(null,r,e),n=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else n()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=n());var r=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<r.length;i++){var n=o(r[i]);s[n].references--}for(var a=c(t,e),d=0;d<r.length;d++){var l=o(r[d]);0===s[l].references&&(s[l].updater(),s.splice(l,1))}r=a}}}}}]);
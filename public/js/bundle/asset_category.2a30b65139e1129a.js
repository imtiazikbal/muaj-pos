"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7244],{57377:(t,e,s)=>{s.r(e),s.d(e,{default:()=>d});var r=s(95353),a=s(5947),i=s.n(a);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,r)}return s}function c(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach(function(e){l(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}function l(t,e,s){return(e=function(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var r=s.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const u={name:"AssetCategoryIndex",data:function(){return{isLoading:!0,SubmitProcessing:!1,serverParams:{sort:{field:"id",type:"desc"},page:1,perPage:10},search:"",limit:"10",totalRows:0,categories:[],editmode:!1,category:{id:"",name:"",description:""}}},computed:c(c({},(0,r.L8)(["currentUserPermissions"])),{},{columns:function(){return[{label:this.$t("Name"),field:"name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Description"),field:"description",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Action"),field:"actions",tdClass:"text-right",thClass:"text-right",sortable:!1}]}}),created:function(){var t=this;this.Get_Categories(1),Fire.$on("Create_Asset_Category",function(){t.Get_Categories(t.serverParams.page),t.$bvModal.hide("New_Asset_Category")}),Fire.$on("Delete_Asset_Category",function(){t.Get_Categories(t.serverParams.page)})},methods:{Submit_Category:function(){var t=this;this.$refs.Create_Category.validate().then(function(e){e?t.editmode?t.Update_Category():t.Create_Category():t.makeToast("danger",t.$t("Please_fill_the_form_correctly"),t.$t("Failed"))})},makeToast:function(t,e,s){this.$root.$bvToast.toast(e,{title:s,variant:t,solid:!0})},onPageChange:function(t){var e=t.currentPage;this.serverParams.page=e,this.Get_Categories(e)},onPerPageChange:function(t){var e=t.currentPerPage;this.limit=e,this.serverParams.page=1,this.serverParams.perPage=e,this.Get_Categories(1)},onSortChange:function(t){this.serverParams.sort.type=t[0].type,this.serverParams.sort.field=t[0].field,this.Get_Categories(this.serverParams.page)},onSearch:function(t){this.search=t.searchTerm,this.Get_Categories(this.serverParams.page)},getValidationState:function(t){var e=t.dirty,s=t.validated,r=t.valid;return e||s?void 0===r?null:r:null},New_Category:function(){this.reset_Form(),this.editmode=!1,this.$bvModal.show("New_Asset_Category")},Edit_Category:function(t){this.reset_Form(),this.category={id:t.id,name:t.name,description:t.description},this.editmode=!0,this.$bvModal.show("New_Asset_Category")},reset_Form:function(){this.category={id:"",name:"",description:""}},Get_Categories:function(t){var e=this;i().start(),i().set(.1),axios.get("assets_category?page="+t+"&SortField="+this.serverParams.sort.field+"&SortType="+this.serverParams.sort.type+"&search="+this.search+"&limit="+this.limit).then(function(t){var s=t.data||{};e.categories=s.data||s.asset_categories||[],e.totalRows=s.totalRows||e.categories.length,i().done(),e.isLoading=!1}).catch(function(){i().done(),setTimeout(function(){e.isLoading=!1},300)})},Create_Category:function(){var t=this;this.SubmitProcessing=!0,axios.post("assets_category",{name:this.category.name,description:this.category.description}).then(function(){Fire.$emit("Create_Asset_Category"),t.makeToast("success",t.$t("Successfully_Created"),t.$t("Success")),t.SubmitProcessing=!1}).catch(function(){t.makeToast("danger",t.$t("InvalidData"),t.$t("Failed")),t.SubmitProcessing=!1})},Update_Category:function(){var t=this;this.SubmitProcessing=!0,axios.put("assets_category/"+this.category.id,{name:this.category.name,description:this.category.description}).then(function(){Fire.$emit("Create_Asset_Category"),t.makeToast("success",t.$t("Successfully_Updated"),t.$t("Success")),t.SubmitProcessing=!1}).catch(function(){t.makeToast("danger",t.$t("InvalidData"),t.$t("Failed")),t.SubmitProcessing=!1})},Delete_Category:function(t){var e=this;this.$swal({title:this.$t("Delete_Title"),text:this.$t("Delete_Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:this.$t("Delete_cancelButtonText"),confirmButtonText:this.$t("Delete_confirmButtonText")}).then(function(s){s.value&&axios.delete("assets_category/"+t).then(function(){e.$swal(e.$t("Delete_Deleted"),e.$t("Deleted_in_successfully"),"success"),Fire.$emit("Delete_Asset_Category")}).catch(function(){e.$swal(e.$t("Delete_Failed"),e.$t("Delete_Therewassomethingwronge"),"warning")})})}}};const d=(0,s(14486).A)(u,function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("breadcumb",{attrs:{page:t.$t("Asset_Category"),folder:t.$t("Assets")}}),t._v(" "),t.isLoading?e("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):e("div",{staticClass:"page-wrapper"},[e("vue-good-table",{attrs:{mode:"remote",columns:t.columns,totalRows:t.totalRows,rows:t.categories,"search-options":{enabled:!0,placeholder:t.$t("Search_this_table")},"pagination-options":{enabled:!0,mode:"records"},styleClass:"tableOne vgt-table"},on:{"on-page-change":t.onPageChange,"on-per-page-change":t.onPerPageChange,"on-sort-change":t.onSortChange,"on-search":t.onSearch},scopedSlots:t._u([{key:"table-row",fn:function(s){return["actions"==s.column.field?e("span",[t.currentUserPermissions&&t.currentUserPermissions.includes("assets")?e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"cursor-pointer",attrs:{title:"Edit"},on:{click:function(e){return t.Edit_Category(s.row)}}},[e("i",{staticClass:"i-Edit text-25 text-success"})]):t._e(),t._v(" "),t.currentUserPermissions&&t.currentUserPermissions.includes("assets")?e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"cursor-pointer",attrs:{title:"Delete"},on:{click:function(e){return t.Delete_Category(s.row.id)}}},[e("i",{staticClass:"i-Close-Window text-25 text-danger"})]):t._e()]):t._e()]}}])},[e("div",{staticClass:"mt-2 mb-3",attrs:{slot:"table-actions"},slot:"table-actions"},[t.currentUserPermissions&&t.currentUserPermissions.includes("assets")?e("b-button",{attrs:{size:"sm",variant:"primary ripple m-1"},on:{click:function(e){return t.New_Category()}}},[e("i",{staticClass:"i-Add"}),t._v("\n          "+t._s(t.$t("Add"))+"\n        ")]):t._e()],1)])],1),t._v(" "),e("validation-observer",{ref:"Create_Category"},[e("b-modal",{attrs:{"hide-footer":"",size:"lg",id:"New_Asset_Category",title:t.editmode?t.$t("Edit"):t.$t("Add")}},[e("b-form",{on:{submit:function(e){return e.preventDefault(),t.Submit_Category.apply(null,arguments)}}},[e("b-row",[e("b-col",{attrs:{md:"12"}},[e("validation-provider",{attrs:{name:"Name",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(s){return[e("b-form-group",{attrs:{label:t.$t("Name")+" *"}},[e("b-form-input",{attrs:{state:t.getValidationState(s),"aria-describedby":"name-feedback"},model:{value:t.category.name,callback:function(e){t.$set(t.category,"name",e)},expression:"category.name"}}),t._v(" "),e("b-form-invalid-feedback",{attrs:{id:"name-feedback"}},[t._v(t._s(s.errors[0]))])],1)]}}])})],1),t._v(" "),e("b-col",{attrs:{md:"12"}},[e("b-form-group",{attrs:{label:t.$t("Description")}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.category.description,expression:"category.description"}],staticClass:"form-control",attrs:{rows:"4",placeholder:t.$t("Afewwords")},domProps:{value:t.category.description},on:{input:function(e){e.target.composing||t.$set(t.category,"description",e.target.value)}}})])],1),t._v(" "),e("b-col",{staticClass:"mt-3",attrs:{md:"12"}},[e("b-button",{attrs:{variant:"primary",type:"submit",disabled:t.SubmitProcessing}},[e("i",{staticClass:"i-Yes me-2 font-weight-bold"}),t._v(" "+t._s(t.$t("submit")))]),t._v(" "),t.SubmitProcessing?t._m(0):t._e()],1)],1)],1)],1)],1)],1)},[function(){var t=this._self._c;return t("div",{staticClass:"typo__p"},[t("div",{staticClass:"spinner sm spinner-primary mt-3"})])}],!1,null,null,null).exports}}]);
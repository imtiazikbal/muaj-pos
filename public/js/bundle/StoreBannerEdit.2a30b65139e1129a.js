/*! For license information please see StoreBannerEdit.2a30b65139e1129a.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5432],{245:(t,e,r)=>{r.r(e),r.d(e,{default:()=>v});function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,s=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==e);c=!0);}catch(t){l=!0,i=t}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function a(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,n,i,o){var a=n&&n.prototype instanceof l?n:l,u=Object.create(a.prototype);return s(u,"_invoke",function(r,n,i){var o,a,s,l=0,u=i||[],f=!1,m={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,r){return o=e,a=0,s=t,m.n=r,c}};function p(r,n){for(a=r,s=n,e=0;!f&&l&&!i&&e<u.length;e++){var i,o=u[e],p=m.p,v=o[2];r>3?(i=v===n)&&(s=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=r<2&&p<o[1])?(a=0,m.v=n,m.n=o[1]):p<v&&(i=r<3||o[0]>n||n>v)&&(o[4]=r,o[5]=n,m.n=v,a=0))}if(i||r>1)return c;throw f=!0,n}return function(i,u,v){if(l>1)throw TypeError("Generator is already running");for(f&&1===u&&p(u,v),a=u,s=v;(e=a<2?t:s)||!f;){o||(a?a<3?(a>1&&(m.n=-1),p(a,s)):m.n=s:m.v=s);try{if(l=2,o){if(a||(i="next"),e=o[i]){if(!(e=e.call(o,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,a<2&&(a=0)}else 1===a&&(e=o.return)&&e.call(o),a<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),a=1);o=t}else if((e=(f=m.n<0)?s:r.call(n,m))!==c)break}catch(e){o=t,a=1,s=e}finally{l=1}}return{value:e,done:f}}}(r,i,o),!0),u}var c={};function l(){}function u(){}function f(){}e=Object.getPrototypeOf;var m=[][n]?e(e([][n]())):(s(e={},n,function(){return this}),e),p=f.prototype=l.prototype=Object.create(m);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,i,"GeneratorFunction")),t.prototype=Object.create(p),t}return u.prototype=f,s(p,"constructor",f),s(f,"constructor",u),u.displayName="GeneratorFunction",s(f,i,"GeneratorFunction"),s(p),s(p,i,"Generator"),s(p,n,function(){return this}),s(p,"toString",function(){return"[object Generator]"}),(a=function(){return{w:o,m:v}})()}function s(t,e,r,n){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}s=function(t,e,r,n){function o(e,r){s(t,e,function(t){return this._invoke(e,r,t)})}e?i?i(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(o("next",0),o("throw",1),o("return",2))},s(t,e,r,n)}function c(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function l(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function a(t){c(o,n,i,a,s,"next",t)}function s(t){c(o,n,i,a,s,"throw",t)}a(void 0)})}}function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach(function(e){m(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function m(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const p={metaInfo:{title:"Store Banner Form"},props:{id:{type:String,required:!1,default:"new"}},data:function(){return{loading:!0,saving:!1,form:{title:"",position:"top_left",active:!0,image:null},preview:null,imgW:null,imgH:null,positions:[{value:"top_left",text:"Top ‚Äî Left"},{value:"top_right",text:"Top ‚Äî Right"},{value:"center_left",text:"Center ‚Äî Left"},{value:"center_right",text:"Center ‚Äî Right"},{value:"footer_left",text:"Footer ‚Äî Left"},{value:"footer_right",text:"Footer ‚Äî Right"}],rec:{top_left:{w:1200,h:600,label:"Top ‚Äî Left"},top_right:{w:1200,h:600,label:"Top ‚Äî Right"},center_left:{w:1200,h:600,label:"Center ‚Äî Left"},center_right:{w:1200,h:600,label:"Center ‚Äî Right"},footer_left:{w:1200,h:600,label:"Footer ‚Äî Left"},footer_right:{w:1200,h:600,label:"Footer ‚Äî Right"}}}},computed:{isNew:function(){return"new"===this.id||!this.id},posInfo:function(){var t=this.rec[this.form.position]||{w:1200,h:600,label:"‚Äî"};return f(f({},t),{},{ratioText:this.toRatioText(t.w,t.h)})},uploadedRatioText:function(){return this.imgW&&this.imgH?this.toRatioText(this.imgW,this.imgH):"‚Äî"},aspectMismatch:function(){if(!this.imgW||!this.imgH)return!1;var t=this.posInfo.w/this.posInfo.h,e=this.imgW/this.imgH;return Math.abs(e-t)/t>.05}},mounted:function(){this.init()},methods:{init:function(){var t=this;return l(a().m(function e(){var r,n;return a().w(function(e){for(;;)switch(e.n){case 0:if(t.isNew){e.n=2;break}return e.n=1,axios.get("/store/banners/".concat(t.id));case 1:r=e.v,n=r.data,Object.assign(t.form,f(f({},n),{},{image:null})),t.preview=n.image_url||(n.image?"/".concat(n.image):null),t.preview&&t.readImageDims(t.preview);case 2:t.loading=!1;case 3:return e.a(2)}},e)}))()},onFile:function(t){var e=this;if(this.form.image=t.target.files[0],this.imgW=this.imgH=null,this.form.image){var r=new FileReader;r.onload=function(){e.preview=r.result,e.readImageDims(e.preview)},r.readAsDataURL(this.form.image)}},readImageDims:function(t){var e=this,r=new Image;r.onload=function(){e.imgW=r.width,e.imgH=r.height},r.src=t},toRatioText:function(t,e){var r=function(t,e){return e?r(e,t%e):t},n=r(Math.round(t),Math.round(e))||1,i=Math.round(t/n),o=Math.round(e/n);return"".concat(i,":").concat(o)},save:function(){var t=this;return l(a().m(function e(){var r;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.saving=!0,e.p=1,r=new FormData,Object.entries(t.form).forEach(function(e){var n=i(e,2),o=n[0],a=n[1];"image"===o?a&&r.append("image",a):"active"===o?r.append("active",t.form.active?"1":"0"):r.append(o,null!=a?a:"")}),!t.isNew){e.n=3;break}return e.n=2,axios.post("/store/banners",r);case 2:e.n=4;break;case 3:return e.n=4,axios.post("/store/banners/".concat(t.id,"?_method=PUT"),r);case 4:t.$bvToast&&t.$bvToast.toast(t.$t("Saved_successfully"),{title:t.$t("Banners"),variant:"success"}),t.$router.push({name:"StoreBanners"});case 5:return e.p=5,t.saving=!1,e.f(5);case 6:return e.a(2)}},e,null,[[1,,5,6]])}))()}}};const v=(0,r(14486).A)(p,function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("breadcumb",{attrs:{page:t.isNew?t.$t("Create"):t.$t("Edit"),folder:t.$t("Banners")}}),t._v(" "),t.loading?e("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):e("b-card",{staticClass:"wrapper"},[e("b-form",{on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-8"},[e("b-form-group",{attrs:{label:t.$t("Title")}},[e("b-form-input",{attrs:{required:""},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),e("b-form-group",{attrs:{label:t.$t("Position")}},[e("b-form-select",{attrs:{options:t.positions},model:{value:t.form.position,callback:function(e){t.$set(t.form,"position",e)},expression:"form.position"}}),t._v(" "),e("div",{staticClass:"mt-2 p-2 border rounded bg-light d-flex align-items-center"},[e("div",{staticClass:"mr-2"},[t._v("üñºÔ∏è")]),t._v(" "),e("div",{staticClass:"small",staticStyle:{color:"#ffff"}},[e("div",{staticClass:"mb-1"},[e("strong",[t._v(t._s(t.posInfo.label))]),t._v(" ‚Äî\n                  "+t._s(t.$t("Recommended"))+": "+t._s(t.posInfo.w)+" √ó "+t._s(t.posInfo.h)+" ("+t._s(t.posInfo.ratioText)+")\n                ")]),t._v(" "),t.imgW&&t.imgH?e("div",{staticClass:"small"},[t._v("\n                  "+t._s(t.$t("Uploaded"))+": "+t._s(t.imgW)+" √ó "+t._s(t.imgH)+" ("+t._s(t.uploadedRatioText)+")\n                  "),t.aspectMismatch?e("span",[t._v("‚Ä¢ "+t._s(t.$t("Aspect ratio differs from recommendation")))]):e("span",[t._v("‚Ä¢ "+t._s(t.$t("Looks good"))+" ‚úÖ")])]):t._e()])])],1),t._v(" "),e("b-form-group",{attrs:{label:t.$t("Image")}},[e("b-form-file",{attrs:{accept:"image/*"},on:{change:t.onFile}}),t._v(" "),t.preview?e("div",{staticClass:"mt-2"},[e("img",{staticClass:"img-thumbnail",staticStyle:{"max-height":"120px"},attrs:{src:t.preview}})]):t._e()],1)],1),t._v(" "),e("div",{staticClass:"col-md-4"},[e("b-form-group",{attrs:{label:t.$t("Active")}},[e("b-form-checkbox",{attrs:{switch:""},model:{value:t.form.active,callback:function(e){t.$set(t.form,"active",e)},expression:"form.active"}},[t._v("\n              "+t._s(t.form.active?t.$t("Active"):t.$t("Disabled"))+"\n            ")])],1),t._v(" "),e("b-button",{attrs:{type:"submit",disabled:t.saving,variant:"btn btn-primary btn-icon m-1"}},[t.saving?e("span",{staticClass:"spinner-border spinner-border-sm mr-2"}):t._e(),t._v(" "),e("i",{staticClass:"i-Yes"}),t._v(" "+t._s(t.$t("Save"))+"\n          ")]),t._v(" "),e("b-button",{attrs:{variant:"btn btn-outline-secondary m-1"},on:{click:function(e){return t.$router.back()}}},[t._v("\n            "+t._s(t.$t("Cancel"))+"\n          ")]),t._v(" "),e("div",{staticClass:"mt-3 p-2 border rounded small text-muted"},[e("div",{staticClass:"mb-1"},[e("strong",[t._v(t._s(t.$t("Size guide")))])]),t._v(" "),e("ul",{staticClass:"mb-0 pl-3"},[e("li",[t._v("Top (Left/Right): 1200√ó600 (2:1)")]),t._v(" "),e("li",[t._v("Center (Left/Right): 1200√ó600 (2:1)")]),t._v(" "),e("li",[t._v("Footer (Left/Right): 1200√ó600 (2:1)")])]),t._v(" "),e("div",{staticClass:"mt-1"},[t._v(t._s(t.$t("Tip"))+": "+t._s(t.$t("Use 2x for retina (e.g., 2400√ó1200).")))])])],1)])])],1)],1)},[],!1,null,null,null).exports}}]);
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7053],{55508:(t,e,n)=>{n.r(e),n.d(e,{default:()=>a});const o={metaInfo:{title:"WooCommerce Settings"},components:{SettingsTab:function(){return n.e(3104).then(n.bind(n,29327))},ProductsTab:function(){return n.e(3411).then(n.bind(n,61725))},StockTab:function(){return n.e(5356).then(n.bind(n,92114))},CategoriesTab:function(){return n.e(6383).then(n.bind(n,72076))},LogsTab:function(){return n.e(5242).then(n.bind(n,25242))},StatusOverviewTab:function(){return n.e(8805).then(n.bind(n,12751))}},data:function(){return{loading:!0,connectionOk:null,totalProducts:null,unsyncedCount:null,activeTab:0,tabLoading:!0,resetting:!1}},computed:{connectionBadgeVariant:function(){return!0===this.connectionOk?"success":!1===this.connectionOk?"danger":"secondary"},connectionBadgeText:function(){return!0===this.connectionOk?this.$t("Connected"):!1===this.connectionOk?this.$t("Disconnected"):this.$t("Unknown")}},methods:{onTabChange:function(){this.tabLoading=!0},onTabReady:function(){this.tabLoading=!1},switchToLogs:function(){this.activeTab=4},fetchCounts:function(){var t=this;axios.get("products",{params:{limit:1}}).then(function(e){var n=e.data;t.totalProducts=null!=n.totalRows?n.totalRows:null}).catch(function(){t.totalProducts=null}),axios.get("woocommerce/unsynced-count").then(function(e){var n=e.data;t.unsyncedCount=n.count}).catch(function(){t.unsyncedCount=null}).finally(function(){t.loading=!1})},testConnection:function(){var t=this;axios.post("woocommerce/test-connection").then(function(e){var n=e.data;t.connectionOk=!!n.ok}).catch(function(){t.connectionOk=!1})},onConnectionUpdate:function(t){this.connectionOk=t},onChildRefreshed:function(){this.fetchCounts(),this.testConnection()},resetSync:function(){var t=this;this.resetting||(this.resetting=!0,axios.post("woocommerce/reset-sync").then(function(){t.$root.$bvToast.toast(t.$t("Successfully_Updated"),{title:t.$t("WooCommerce"),variant:"success",solid:!0})}).catch(function(){t.$root.$bvToast.toast(t.$t("Sync_Failed"),{title:t.$t("WooCommerce"),variant:"danger",solid:!0})}).finally(function(){t.resetting=!1,t.onChildRefreshed()}))}},created:function(){this.fetchCounts(),this.testConnection()}};const a=(0,n(14486).A)(o,function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("breadcumb",{attrs:{page:t.$t("WooCommerce_Settings"),folder:t.$t("Settings")}}),t._v(" "),t.loading?e("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):e("div",[e("b-card",{attrs:{"no-body":""}},[e("div",{staticClass:"d-flex align-items-center justify-content-between px-3 pt-3"},[e("div",[e("b-badge",{attrs:{variant:t.connectionBadgeVariant}},[t._v(t._s(t.connectionBadgeText))])],1),t._v(" "),e("div",[e("b-button",{attrs:{variant:"danger",size:"sm",disabled:t.resetting},on:{click:t.resetSync}},[t.resetting?e("span",[t._v(t._s(t.$t("Resetting"))+"...")]):e("span",[t._v(t._s(t.$t("Reset_Sync_State")))])])],1)]),t._v(" "),e("b-tabs",{attrs:{"content-class":"mt-3 position-relative"},on:{input:t.onTabChange},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[t.tabLoading?e("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):t._e(),t._v(" "),e("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.$t("Settings")))]},proxy:!0}])},[t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.tabLoading,expression:"!tabLoading"}]},[e("SettingsTab",{on:{ready:t.onTabReady,connection:t.onConnectionUpdate,updated:t.onChildRefreshed}})],1)]),t._v(" "),e("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("\n            "+t._s(t.$t("Products"))+"\n            "),null!==t.unsyncedCount?e("b-badge",{staticClass:"ml-2",attrs:{variant:"warning"}},[t._v(t._s(t.unsyncedCount))]):t._e()]},proxy:!0}])},[t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.tabLoading,expression:"!tabLoading"}]},[e("ProductsTab",{on:{ready:t.onTabReady,refreshed:t.onChildRefreshed}})],1)]),t._v(" "),e("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.$t("Stock")))]},proxy:!0}])},[t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.tabLoading,expression:"!tabLoading"}]},[e("StockTab",{on:{ready:t.onTabReady,refreshed:t.onChildRefreshed,"view-logs":t.switchToLogs}})],1)]),t._v(" "),e("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.$t("Categories")))]},proxy:!0}])},[t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.tabLoading,expression:"!tabLoading"}]},[e("CategoriesTab",{on:{ready:t.onTabReady,refreshed:t.onChildRefreshed}})],1)]),t._v(" "),e("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.$t("View_Logs")))]},proxy:!0}])},[t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.tabLoading,expression:"!tabLoading"}]},[e("LogsTab",{on:{ready:t.onTabReady}})],1)]),t._v(" "),e("b-tab",{attrs:{lazy:""},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.$t("Status_Overview")))]},proxy:!0}])},[t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.tabLoading,expression:"!tabLoading"}]},[e("StatusOverviewTab",{on:{ready:t.onTabReady}})],1)])],1)],1),t._v(" "),e("b-modal",{attrs:{id:"log-detail",title:t.$t("Log_Details"),"hide-footer":""},model:{value:t.selectedLog,callback:function(e){t.selectedLog=e},expression:"selectedLog"}},[t.selectedLog?e("div",[e("p",{staticClass:"mb-1"},[e("strong",[t._v(t._s(t.$t("date"))+":")]),t._v(" "+t._s(t.formatDate(t.selectedLog.created_at)))]),t._v(" "),e("p",{staticClass:"mb-1"},[e("strong",[t._v(t._s(t.$t("Action"))+":")]),t._v(" "+t._s(t.selectedLog.action))]),t._v(" "),e("p",{staticClass:"mb-1"},[e("strong",[t._v(t._s(t.$t("Level"))+":")]),t._v(" "+t._s(t.selectedLog.level))]),t._v(" "),e("p",{staticClass:"mb-1"},[e("strong",[t._v(t._s(t.$t("Message"))+":")]),t._v(" "+t._s(t.selectedLog.message))]),t._v(" "),e("hr"),t._v(" "),e("p",{staticClass:"mb-1"},[e("strong",[t._v(t._s(t.$t("Context")))])]),t._v(" "),e("pre",{staticClass:"bg-light p-2",staticStyle:{"white-space":"pre-wrap","word-break":"break-word","max-height":"400px",overflow:"auto"}},[t._v(t._s(t.stringify(t.selectedLog.context)))])]):t._e()])],1)],1)},[],!1,null,null,null).exports}}]);
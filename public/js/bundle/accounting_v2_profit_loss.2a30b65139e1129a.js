/*! For license information please see accounting_v2_profit_loss.2a30b65139e1129a.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[610],{9546:(t,e,n)=>{n.r(e),n.d(e,{default:()=>v});var r=n(5947),a=n.n(r);function o(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,o){var i=r&&r.prototype instanceof c?r:c,u=Object.create(i.prototype);return s(u,"_invoke",function(n,r,a){var o,s,i,c=0,u=a||[],f=!1,d={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,n){return o=e,s=0,i=t,d.n=n,l}};function m(n,r){for(s=n,i=r,e=0;!f&&c&&!a&&e<u.length;e++){var a,o=u[e],m=d.p,p=o[2];n>3?(a=p===r)&&(i=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=m&&((a=n<2&&m<o[1])?(s=0,d.v=r,d.n=o[1]):m<p&&(a=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,d.n=p,s=0))}if(a||n>1)return l;throw f=!0,r}return function(a,u,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===u&&m(u,p),s=u,i=p;(e=s<2?t:i)||!f;){o||(s?s<3?(s>1&&(d.n=-1),m(s,i)):d.n=i:d.v=i);try{if(c=2,o){if(s||(a="next"),e=o[a]){if(!(e=e.call(o,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),s=1);o=t}else if((e=(f=d.n<0)?i:n.call(r,d))!==l)break}catch(e){o=t,s=1,i=e}finally{c=1}}return{value:e,done:f}}}(n,a,o),!0),u}var l={};function c(){}function u(){}function f(){}e=Object.getPrototypeOf;var d=[][r]?e(e([][r]())):(s(e={},r,function(){return this}),e),m=f.prototype=c.prototype=Object.create(d);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t}return u.prototype=f,s(m,"constructor",f),s(f,"constructor",u),u.displayName="GeneratorFunction",s(f,a,"GeneratorFunction"),s(m),s(m,a,"Generator"),s(m,r,function(){return this}),s(m,"toString",function(){return"[object Generator]"}),(o=function(){return{w:i,m:p}})()}function s(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}s=function(t,e,n,r){function o(e,n){s(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},s(t,e,n,r)}function i(t,e,n,r,a,o,s){try{var i=t[o](s),l=i.value}catch(t){return void n(t)}i.done?e(l):Promise.resolve(l).then(r,a)}function l(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const u={name:"ProfitLossV2",data:function(){return{isLoading:!0,rows:[],totalRows:"",serverParams:{columnFilters:{},sort:{field:"code",type:"asc"},page:1,perPage:10},search:"",limit:"10",filters:{from:"",to:"",type:""},summary:{income:0,expense:0,net_profit:0}}},computed:{columns:function(){return[{label:this.$t("Code"),field:"code",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Name"),field:"name",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Type"),field:"type",tdClass:"text-left",thClass:"text-left"},{label:this.$t("Amount"),field:"amount",tdClass:"text-right",thClass:"text-right",sortable:!0}]},tableRows:function(){var t=this.rows||[],e=[];return e.push({isTotal:!0,totalLabel:"Total_Income",totalValue:this.summary.income}),e.push({isTotal:!0,totalLabel:"Total_Expense",totalValue:this.summary.expense}),e.push({isTotal:!0,totalLabel:"Net_Profit",totalValue:this.summary.net_profit}),[].concat(l(t),e)}},created:function(){this.Get_PL(1)},methods:{updateParams:function(t){this.serverParams=Object.assign({},this.serverParams,t)},onPageChange:function(t){var e=t.currentPage;this.serverParams.page!==e&&(this.updateParams({page:e}),this.Get_PL(e))},onPerPageChange:function(t){var e=t.currentPerPage;this.limit!==e&&(this.limit=e,this.updateParams({page:1,perPage:e}),this.Get_PL(1))},onSortChange:function(t){t&&t.length&&(this.updateParams({sort:{type:t[0].type,field:t[0].field}}),this.Get_PL(this.serverParams.page))},onSearch:function(t){this.search=t.searchTerm,this.Get_PL(this.serverParams.page)},Get_PL:function(t){var e,n=this;return(e=o().m(function e(){return o().w(function(e){for(;;)switch(e.n){case 0:a().start(),a().set(.1),axios.get("/accounting/v2/reports/profit-loss?page="+t+"&SortField="+n.serverParams.sort.field+"&SortType="+n.serverParams.sort.type+"&search="+n.search+"&limit="+n.limit+"&from="+(n.filters.from||"")+"&to="+(n.filters.to||"")+"&type="+(n.filters.type||"")).then(function(t){var e,r,o=t.data;n.rows=o&&(o.data||[])||[],n.totalRows=o&&(null!==(e=null!==(r=o.totalRows)&&void 0!==r?r:o.total)&&void 0!==e?e:n.rows.length)||0,o&&o.summary&&(n.summary=o.summary),a().done(),n.isLoading=!1}).catch(function(){a().done(),n.isLoading=!1});case 1:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function s(t){i(o,r,a,s,l,"next",t)}function l(t){i(o,r,a,s,l,"throw",t)}s(void 0)})})()},toMoney:function(t){return parseFloat(t||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}}};var f=n(85072),d=n.n(f),m=n(62943),p={insert:"head",singleton:!1};d()(m.A,p);m.A.locals;const v=(0,n(14486).A)(u,function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("div",{staticClass:"d-flex align-items-center justify-content-between mb-3"},[e("div",[e("h4",{staticClass:"mb-1"},[t._v(t._s(t.$t("Profit_Loss_Title")))]),t._v(" "),e("div",{staticClass:"text-muted small"},[t._v(t._s(t.$t("Profit_Loss_Subtitle")))])])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"card p-3 mb-3 kpi"},[e("div",{staticClass:"text-muted small"},[t._v(t._s(t.$t("Income")))]),t._v(" "),e("div",{staticClass:"h4 mb-0"},[t._v(t._s(t.toMoney(t.summary.income)))])])]),t._v(" "),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"card p-3 mb-3 kpi"},[e("div",{staticClass:"text-muted small"},[t._v(t._s(t.$t("Expense")))]),t._v(" "),e("div",{staticClass:"h4 mb-0"},[t._v(t._s(t.toMoney(t.summary.expense)))])])]),t._v(" "),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"card p-3 mb-3 kpi",class:t.summary.net_profit>=0?"border-success":"border-danger"},[e("div",{staticClass:"text-muted small"},[t._v(t._s(t.$t("Net_Profit")))]),t._v(" "),e("div",{staticClass:"h4 mb-0"},[t._v(t._s(t.toMoney(t.summary.net_profit)))])])])]),t._v(" "),t.isLoading?e("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):t._e(),t._v(" "),t.isLoading?t._e():e("div",{staticClass:"card wrapper"},[e("vue-good-table",{attrs:{mode:"remote",columns:t.columns,totalRows:t.totalRows,rows:t.tableRows,"search-options":{enabled:!0,placeholder:t.$t("Search_accounts")},"pagination-options":{enabled:!0,mode:"records",nextLabel:t.$t("Next"),prevLabel:t.$t("Prev")},styleClass:"table-hover tableOne vgt-table"},on:{"on-page-change":t.onPageChange,"on-per-page-change":t.onPerPageChange,"on-sort-change":t.onSortChange,"on-search":t.onSearch},scopedSlots:t._u([{key:"table-row",fn:function(n){return[n.row&&n.row.isTotal?["code"==n.column.field?e("span"):"name"==n.column.field?e("span",{staticClass:"font-weight-bold d-block text-right"},[t._v(t._s(t.$t(n.row.totalLabel)))]):"type"==n.column.field?e("span"):"amount"==n.column.field?e("span",{staticClass:"text-right d-block font-weight-bold"},[t._v(t._s(t.toMoney(n.row.totalValue)))]):t._e()]:["amount"==n.column.field?e("span",{staticClass:"text-right d-block"},[t._v(t._s(t.toMoney(n.row.amount)))]):t._e()]]}}],null,!1,3679456652)},[e("div",{staticClass:"mt-2 mb-3",attrs:{slot:"table-actions"},slot:"table-actions"},[e("div",{staticClass:"form-inline"},[e("label",{staticClass:"mr-2 small text-muted"},[t._v(t._s(t.$t("From")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.from,expression:"filters.from"}],staticClass:"form-control mr-2",attrs:{type:"date"},domProps:{value:t.filters.from},on:{input:function(e){e.target.composing||t.$set(t.filters,"from",e.target.value)}}}),t._v(" "),e("label",{staticClass:"mr-2 small text-muted"},[t._v(t._s(t.$t("To")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.to,expression:"filters.to"}],staticClass:"form-control mr-2",attrs:{type:"date"},domProps:{value:t.filters.to},on:{input:function(e){e.target.composing||t.$set(t.filters,"to",e.target.value)}}}),t._v(" "),e("label",{staticClass:"mr-2 small text-muted"},[t._v(t._s(t.$t("Type")))]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.type,expression:"filters.type"}],staticClass:"form-control mr-2",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.filters,"type",e.target.multiple?n:n[0])}}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("All")))]),t._v(" "),e("option",{attrs:{value:"income"}},[t._v(t._s(t.$t("Income")))]),t._v(" "),e("option",{attrs:{value:"expense"}},[t._v(t._s(t.$t("Expense")))])]),t._v(" "),e("b-button",{staticClass:"btn-rounded",attrs:{variant:"btn btn-outline-primary btn-icon m-1"},on:{click:function(e){return t.Get_PL(1)}}},[e("i",{staticClass:"i-Reload"}),t._v("\n            "+t._s(t.$t("Apply"))+"\n          ")])],1)])])],1)])},[],!1,null,"59ed7cb5",null).exports},62943:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(76314),a=n.n(r)()(function(t){return t[1]});a.push([t.id,".kpi[data-v-59ed7cb5]{border-left:4px solid #639}",""]);const o=a},76314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n}).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(a[s]=!0)}for(var i=0;i<t.length;i++){var l=[].concat(t[i]);r&&a[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},85072:(t,e,n)=>{var r,a=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),s=[];function i(t){for(var e=-1,n=0;n<s.length;n++)if(s[n].identifier===t){e=n;break}return e}function l(t,e){for(var n={},r=[],a=0;a<t.length;a++){var o=t[a],l=e.base?o[0]+e.base:o[0],c=n[l]||0,u="".concat(l," ").concat(c);n[l]=c+1;var f=i(u),d={css:o[1],media:o[2],sourceMap:o[3]};-1!==f?(s[f].references++,s[f].updater(d)):s.push({identifier:u,updater:h(d,e),references:1}),r.push(u)}return r}function c(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach(function(t){e.setAttribute(t,r[t])}),"function"==typeof t.insert)t.insert(e);else{var s=o(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var u,f=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function d(t,e,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=f(e,a);else{var o=document.createTextNode(a),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function m(t,e,n){var r=n.css,a=n.media,o=n.sourceMap;if(a?t.setAttribute("media",a):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var p=null,v=0;function h(t,e){var n,r,a;if(e.singleton){var o=v++;n=p||(p=c(e)),r=d.bind(null,n,o,!1),a=d.bind(null,n,o,!0)}else n=c(e),r=m.bind(null,n,e),a=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else a()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=a());var n=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var a=i(n[r]);s[a].references--}for(var o=l(t,e),c=0;c<n.length;c++){var u=i(n[c]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}n=o}}}}}]);
/*! For license information please see quickbooks_sync.2a30b65139e1129a.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9060],{51881:(t,e,n)=>{n.r(e),n.d(e,{default:()=>m});var s=n(5947),a=n.n(s);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,s)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){o(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var s=n.call(t,e||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(){var t,e,n="function"==typeof Symbol?Symbol:{},s=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function r(n,s,a,r){var o=s&&s.prototype instanceof c?s:c,l=Object.create(o.prototype);return u(l,"_invoke",function(n,s,a){var r,c,o,l=0,u=a||[],_=!1,d={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,n){return r=e,c=0,o=t,d.n=n,i}};function v(n,s){for(c=n,o=s,e=0;!_&&l&&!a&&e<u.length;e++){var a,r=u[e],v=d.p,m=r[2];n>3?(a=m===s)&&(o=r[(c=r[4])?5:(c=3,3)],r[4]=r[5]=t):r[0]<=v&&((a=n<2&&v<r[1])?(c=0,d.v=s,d.n=r[1]):v<m&&(a=n<3||r[0]>s||s>m)&&(r[4]=n,r[5]=s,d.n=m,c=0))}if(a||n>1)return i;throw _=!0,s}return function(a,u,m){if(l>1)throw TypeError("Generator is already running");for(_&&1===u&&v(u,m),c=u,o=m;(e=c<2?t:o)||!_;){r||(c?c<3?(c>1&&(d.n=-1),v(c,o)):d.n=o:d.v=o);try{if(l=2,r){if(c||(a="next"),e=r[a]){if(!(e=e.call(r,o)))throw TypeError("iterator result is not an object");if(!e.done)return e;o=e.value,c<2&&(c=0)}else 1===c&&(e=r.return)&&e.call(r),c<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),c=1);r=t}else if((e=(_=d.n<0)?o:n.call(s,d))!==i)break}catch(e){r=t,c=1,o=e}finally{l=1}}return{value:e,done:_}}}(n,a,r),!0),l}var i={};function c(){}function o(){}function _(){}e=Object.getPrototypeOf;var d=[][s]?e(e([][s]())):(u(e={},s,function(){return this}),e),v=_.prototype=c.prototype=Object.create(d);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,u(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t}return o.prototype=_,u(v,"constructor",_),u(_,"constructor",o),o.displayName="GeneratorFunction",u(_,a,"GeneratorFunction"),u(v),u(v,a,"Generator"),u(v,s,function(){return this}),u(v,"toString",function(){return"[object Generator]"}),(l=function(){return{w:r,m}})()}function u(t,e,n,s){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}u=function(t,e,n,s){function r(e,n){u(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!s,configurable:!s,writable:!s}):t[e]=n:(r("next",0),r("throw",1),r("return",2))},u(t,e,n,s)}function _(t,e,n,s,a,r,i){try{var c=t[r](i),o=c.value}catch(t){return void n(t)}c.done?e(o):Promise.resolve(o).then(s,a)}function d(t){return function(){var e=this,n=arguments;return new Promise(function(s,a){var r=t.apply(e,n);function i(t){_(r,s,a,i,c,"next",t)}function c(t){_(r,s,a,i,c,"throw",t)}i(void 0)})}}const v={metaInfo:{title:"QuickBooks Sync"},data:function(){return{isLoading:!0,busy:!1,status:{env:"",redirect:"",callback:"",has_token:!1,token_realm:null,updated_at:"",connect_url:""},form:{client_id:"",client_secret:"",redirect:"",env:"Development",realm_id:"",income_account_name:""},envOptions:[{value:"Development",text:this.$t("Development")},{value:"Production",text:this.$t("Production")}],level:"",levelOptions:[{value:"",text:this.$t("All")},{value:"error",text:this.$t("Errors")},{value:"warning",text:this.$t("Warnings")},{value:"info",text:this.$t("Info")}],audits:{data:[],total:0,last_page:1,next_page_url:null,prev_page_url:null},page:1,loadingClients:!1,syncingClients:!1,syncingRowId:null,clientStats:{total:0,synced:0,not_synced:0},unsyncedBusy:!1,unsynced:{items:[],last_page:1,total:0,current_page:1},unsyncedFields:[{key:"select",label:""},{key:"id",label:this.$t("ID"),sortable:!0},{key:"name",label:this.$t("Client"),sortable:!0},{key:"email",label:this.$t("Email"),sortable:!0},{key:"created_at",label:this.$t("Added"),sortable:!0},{key:"actions",label:this.$t("Actions")}],search:"",selectedIds:[],syncReport:null}},computed:{callbackExample:function(){var t=window.location.origin;return"".concat(t,"/quickbooks/callback")},syncPercent:function(){var t=this.clientStats.total||0,e=this.clientStats.synced||0;return 0===t?0:Math.round(e/t*100)}},methods:{toast:function(t,e,n){this.$root.$bvToast.toast(e,{title:n,variant:t,solid:!0})},fmtWhen:function(t){if(!t)return"-";try{var e=new Date(t);return new Intl.DateTimeFormat(void 0,{timeZone:"Africa/Casablanca",dateStyle:"medium",timeStyle:"short"}).format(e)}catch(e){return t}},fmtDate:function(t){return t?new Intl.DateTimeFormat(void 0,{timeZone:"Africa/Casablanca",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date(t)):"-"},fmtTime:function(t){return t?new Intl.DateTimeFormat(void 0,{timeZone:"Africa/Casablanca",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date(t)):"-"},badge:function(t){return{"badge badge-danger":"error"===t,"badge badge-warning":"warning"===t,"badge badge-success":"info"===t}},Clear_Cache:function(){var t=this;a().start(),a().set(.1),axios.get("/clear_cache").then(function(){return t.toast("success",t.$t("Cache_cleared_successfully"),t.$t("Success"))}).catch(function(){return t.toast("danger",t.$t("Failed_to_clear_cache"),t.$t("Failed"))}).finally(function(){return a().done()})},loadStatus:function(){var t=this;return d(l().m(function e(){var n,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,axios.get("/quickbooks/status");case 1:n=e.v,s=n.data,t.status=s,e.n=3;break;case 2:e.p=2,e.v,t.toast("danger",t.$t("Failed_to_load_status"),t.$t("QuickBooks"));case 3:return e.a(2)}},e,null,[[0,2]])}))()},connectBlank:function(){var t=this.status.connect_url||"/quickbooks/connect";window.location.href=t},disconnect:function(){var t=this;return d(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return t.busy=!0,a().start(),e.p=1,e.n=2,axios.post("/quickbooks/disconnect");case 2:return t.toast("success",t.$t("Disconnected"),t.$t("QuickBooks")),e.n=3,t.loadStatus();case 3:e.n=5;break;case 4:e.p=4,e.v,t.toast("danger",t.$t("Failed_to_disconnect"),t.$t("QuickBooks"));case 5:return e.p=5,t.busy=!1,a().done(),e.f(5);case 6:return e.a(2)}},e,null,[[1,4,5,6]])}))()},loadSettings:function(){var t=this;return d(l().m(function e(){var n,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,axios.get("/quickbooks/settings?time=".concat(Date.now()));case 1:n=e.v,s=n.data,t.form=c(c({},t.form),s),e.n=3;break;case 2:e.p=2,e.v,t.toast("danger",t.$t("Failed_to_load_settings"),t.$t("QuickBooks"));case 3:return e.a(2)}},e,null,[[0,2]])}))()},save:function(){var t=this;return d(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return t.busy=!0,a().start(),e.p=1,e.n=2,axios.post("/quickbooks/settings",t.form);case 2:return t.toast("success",t.$t("Settings_saved_to_env"),t.$t("QuickBooks")),e.n=3,t.loadStatus();case 3:e.n=5;break;case 4:e.p=4,e.v,t.toast("danger",t.$t("Failed_to_save_settings"),t.$t("QuickBooks"));case 5:return e.p=5,t.busy=!1,a().done(),e.f(5);case 6:return e.a(2)}},e,null,[[1,4,5,6]])}))()},loadAudits:function(){var t=arguments,e=this;return d(l().m(function n(){var s,a,r;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:1,e.page=s,n.p=1,n.n=2,axios.get("/quickbooks/audits",{params:{page:s,level:e.level}});case 2:a=n.v,r=a.data,e.audits=r,n.n=4;break;case 3:n.p=3,n.v,e.toast("danger",e.$t("Failed_to_load_audit_logs"),e.$t("QuickBooks"));case 4:return n.a(2)}},n,null,[[1,3]])}))()},loadClientStats:function(){var t=this;return d(l().m(function e(){var n,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return t.loadingClients=!0,e.p=1,e.n=2,axios.get("/quickbooks/clients-stats");case 2:n=e.v,s=n.data,t.clientStats=s,e.n=4;break;case 3:e.p=3,e.v,t.toast("danger",t.$t("Failed_to_load_client_stats"),t.$t("QuickBooks"));case 4:return e.p=4,t.loadingClients=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}))()},loadUnsynced:function(){var t=arguments,e=this;return d(l().m(function n(){var s,a,r;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:1,e.unsyncedBusy=!0,n.p=1,n.n=2,axios.get("/quickbooks/clients-unsynced",{params:{page:s,q:e.search}});case 2:a=n.v,r=a.data,e.unsynced=r,e.page=r.current_page||s,n.n=4;break;case 3:n.p=3,n.v,e.toast("danger",e.$t("Failed_to_load_unsynced_clients"),e.$t("QuickBooks"));case 4:return n.p=4,e.unsyncedBusy=!1,n.f(4);case 5:return n.a(2)}},n,null,[[1,3,4,5]])}))()},syncAllClients:function(){var t=this;return d(l().m(function e(){var n,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.status.has_token){e.n=1;break}return t.toast("warning",t.$t("Connect_to_QuickBooks_first"),t.$t("QuickBooks")),e.a(2);case 1:return t.syncingClients=!0,t.syncReport=null,a().start(),e.p=2,e.n=3,axios.post("/quickbooks/sync-clients");case 3:return n=e.v,s=n.data,t.syncReport=s,e.n=4,Promise.all([t.loadClientStats(),t.loadUnsynced(t.page)]);case 4:(s.synced_count||0)>0?t.toast("success","".concat(t.$t("Synced")," ").concat(s.synced_count," ").concat(t.$t("Clients")),t.$t("QuickBooks")):t.toast("warning",s.note||t.$t("No_clients_were_synced"),t.$t("QuickBooks")),e.n=6;break;case 5:e.p=5,e.v,t.toast("danger",t.$t("Failed_to_sync_clients"),t.$t("QuickBooks"));case 6:return e.p=6,t.syncingClients=!1,a().done(),e.f(6);case 7:return e.a(2)}},e,null,[[2,5,6,7]])}))()},syncSelected:function(){var t=this;return d(l().m(function e(){var n,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.status.has_token){e.n=1;break}return t.toast("warning",t.$t("Connect_to_QuickBooks_first"),t.$t("QuickBooks")),e.a(2);case 1:if(0!==t.selectedIds.length){e.n=2;break}return e.a(2);case 2:return t.syncingClients=!0,t.syncReport=null,a().start(),e.p=3,e.n=4,axios.post("/quickbooks/sync-clients",{ids:t.selectedIds});case 4:return n=e.v,s=n.data,t.syncReport=s,t.selectedIds=[],e.n=5,Promise.all([t.loadClientStats(),t.loadUnsynced(t.page)]);case 5:t.toast((s.synced_count||0)>0?"success":"warning","".concat(t.$t("Synced")," ").concat(s.synced_count," ").concat(t.$t("Selected")),t.$t("QuickBooks")),e.n=7;break;case 6:e.p=6,e.v,t.toast("danger",t.$t("Sync_selected_failed"),t.$t("QuickBooks"));case 7:return e.p=7,t.syncingClients=!1,a().done(),e.f(7);case 8:return e.a(2)}},e,null,[[3,6,7,8]])}))()},syncOne:function(t){var e=this;return d(l().m(function n(){var s,r;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:if(e.status.has_token){n.n=1;break}return e.toast("warning",e.$t("Connect_to_QuickBooks_first"),e.$t("QuickBooks")),n.a(2);case 1:return e.syncingRowId=t.id,e.syncReport=null,a().start(),n.p=2,n.n=3,axios.post("/quickbooks/sync-clients",{ids:[t.id]});case 3:return s=n.v,r=s.data,e.syncReport=r,n.n=4,Promise.all([e.loadClientStats(),e.loadUnsynced(e.page)]);case 4:e.toast((r.synced_count||0)>0?"success":"warning",e.$t("Client_sync_attempted"),e.$t("QuickBooks")),n.n=6;break;case 5:n.p=5,n.v,e.toast("danger",e.$t("Client_sync_failed"),e.$t("QuickBooks"));case 6:return n.p=6,e.syncingRowId=null,a().done(),n.f(6);case 7:return n.a(2)}},n,null,[[2,5,6,7]])}))()}},created:function(){var t=this;return d(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Promise.all([t.loadStatus(),t.loadSettings(),t.loadAudits(1),t.loadClientStats(),t.loadUnsynced(1)]);case 1:return e.p=1,t.isLoading=!1,e.f(1);case 2:return e.a(2)}},e,null,[[0,,1,2]])}))()}};const m=(0,n(14486).A)(v,function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("breadcumb",{attrs:{page:t.$t("Quickbooks_Sync"),folder:t.$t("Settings")}}),t._v(" "),t.isLoading?e("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):t._e(),t._v(" "),t.isLoading?t._e():e("b-col",{attrs:{md:"12"}},[e("b-tabs",{attrs:{pills:"","content-class":"mt-3"}},[e("b-tab",{attrs:{title:t.$t("Connection"),active:""}},[e("div",{staticClass:"row border rounded p-3 mt-3"},[e("b-col",{staticClass:"mb-2",attrs:{md:"12"}},[e("p",{staticClass:"mb-1"},[e("strong",[t._v(t._s(t.$t("Environment"))+":")]),t._v(" "+t._s(t.status.env))]),t._v(" "),e("p",{staticClass:"mb-1"},[e("strong",[t._v(t._s(t.$t("Redirect_URI_active"))+":")]),t._v(" "+t._s(t.status.redirect))]),t._v(" "),e("p",{staticClass:"mb-1"},[e("strong",[t._v(t._s(t.$t("Callback"))+":")]),t._v(" "+t._s(t.status.callback))]),t._v(" "),e("p",{staticClass:"mb-1"},[e("strong",[t._v(t._s(t.$t("Status"))+":")]),t._v(" "),t.status.has_token?e("span",{staticClass:"text-success"},[t._v(t._s(t.$t("Connected")))]):e("span",{staticClass:"text-danger"},[t._v(t._s(t.$t("Disconnected")))])]),t._v(" "),t.status.token_realm?e("p",{staticClass:"mb-3"},[e("strong",[t._v(t._s(t.$t("Realm_ID"))+":")]),t._v(" "+t._s(t.status.token_realm))]):t._e(),t._v(" "),e("div",{staticClass:"d-flex gap-2"},[t.status.has_token?e("b-button",{attrs:{variant:"danger",disabled:t.busy},on:{click:t.disconnect}},[t._v("\n                "+t._s(t.$t("Disconnect"))+"\n              ")]):e("b-button",{attrs:{variant:"primary"},on:{click:t.connectBlank}},[t._v("\n                "+t._s(t.$t("Connect_to_QuickBooks"))+"\n              ")]),t._v(" "),e("b-button",{staticClass:"ml-2",attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(e){return t.Clear_Cache()}}},[t._v("\n                "+t._s(t.$t("Clear_Cache"))+"\n              ")])],1)])],1)]),t._v(" "),e("b-tab",{attrs:{title:t.$t("Settings")}},[e("div",{staticClass:"row border rounded p-3 mt-3"},[e("b-form",{staticStyle:{width:"100%"},on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("b-row",[e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{label:t.$t("Client_ID")}},[e("b-form-input",{attrs:{required:""},model:{value:t.form.client_id,callback:function(e){t.$set(t.form,"client_id","string"==typeof e?e.trim():e)},expression:"form.client_id"}}),t._v(" "),e("b-form-text",{staticClass:"text-muted"},[t._v("\n                    "+t._s(t.$t("From_Intuit_Keys_Identifies_App"))+"\n                    "+t._s(t.$t("Paste_value_exactly_as_in_app_keys"))+"\n                  ")])],1)],1),t._v(" "),e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{label:t.$t("Client_Secret")}},[e("b-form-input",{attrs:{type:"password",required:""},model:{value:t.form.client_secret,callback:function(e){t.$set(t.form,"client_secret","string"==typeof e?e.trim():e)},expression:"form.client_secret"}}),t._v(" "),e("b-form-text",{staticClass:"text-muted"},[t._v("\n                    "+t._s(t.$t("From_Intuit_Keys_Keep_private_rotate"))+"\n                  ")])],1)],1),t._v(" "),e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{label:t.$t("Redirect_URI")}},[e("b-form-input",{attrs:{required:""},model:{value:t.form.redirect,callback:function(e){t.$set(t.form,"redirect","string"==typeof e?e.trim():e)},expression:"form.redirect"}}),t._v(" "),e("b-form-text",{staticClass:"text-muted"},[t._v("\n                    "+t._s(t.$t("Must_match_Intuit_redirect_exactly"))+"\n                    "+t._s(t.$t("Typical"))+": "),e("code",[t._v(t._s(t.callbackExample))]),t._v(". "+t._s(t.$t("Add_this_exact_URL_on_Keys_page_too"))+"\n                  ")])],1)],1),t._v(" "),e("b-col",{attrs:{md:"3"}},[e("b-form-group",{attrs:{label:t.$t("Environment")}},[e("b-form-select",{attrs:{options:t.envOptions},model:{value:t.form.env,callback:function(e){t.$set(t.form,"env",e)},expression:"form.env"}}),t._v(" "),e("b-form-text",{staticClass:"text-muted"},[e("strong",[t._v(t._s(t.$t("Development")))]),t._v(" = "+t._s(t.$t("Sandbox_company_test_data"))),e("br"),t._v(" "),e("strong",[t._v(t._s(t.$t("Production")))]),t._v(" = "+t._s(t.$t("Live_QB_company"))+"\n                  ")])],1)],1),t._v(" "),e("b-col",{attrs:{md:"3"}},[e("b-form-group",{attrs:{label:t.$t("Realm_ID")}},[e("b-form-input",{model:{value:t.form.realm_id,callback:function(e){t.$set(t.form,"realm_id","string"==typeof e?e.trim():e)},expression:"form.realm_id"}}),t._v(" "),e("b-form-text",{staticClass:"text-muted"},[t._v("\n                    "+t._s(t.$t("Realm_ID_Hint"))+"\n                  ")])],1)],1),t._v(" "),e("b-col",{attrs:{md:"6"}},[e("b-form-group",{attrs:{label:t.$t("Income_Account_Name")}},[e("b-form-input",{attrs:{placeholder:t.$t("Income_Account_Name")},model:{value:t.form.income_account_name,callback:function(e){t.$set(t.form,"income_account_name","string"==typeof e?e.trim():e)},expression:"form.income_account_name"}}),t._v(" "),e("b-form-text",{staticClass:"text-muted"},[t._v("\n                    "+t._s(t.$t("Income_Account_Name_Hint"))+"\n                  ")])],1)],1)],1),t._v(" "),e("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.busy}},[t._v(t._s(t.$t("Save")))])],1)],1)]),t._v(" "),e("b-tab",{attrs:{title:t.$t("Clients_Sync")}},[e("div",{staticClass:"row rounded p-3 mt-3 w-100",staticStyle:{background:"#0f172a10",border:"1px solid #e5e7eb"}},[t.status.has_token?t._e():e("b-alert",{staticClass:"w-100 mb-3 d-flex align-items-center justify-content-between",attrs:{show:"",variant:"warning"}},[e("div",[e("strong",[t._v(t._s(t.$t("Not_connected_to_QuickBooks")))]),t._v("\n              "+t._s(t.$t("Please_connect_before_syncing_clients"))+"\n            ")]),t._v(" "),e("b-button",{attrs:{size:"sm",variant:"primary"},on:{click:t.connectBlank}},[t._v(t._s(t.$t("Connect")))])],1),t._v(" "),e("b-row",{staticClass:"w-100"},[e("b-col",{staticClass:"mb-3",attrs:{md:"3"}},[e("b-card",{staticClass:"h-100 shadow-sm border-0",staticStyle:{background:"linear-gradient(135deg,#eef2ff,#e0e7ff)"}},[e("div",{staticClass:"d-flex align-items-center"},[e("div",{staticClass:"mr-3",staticStyle:{"font-size":"26px"}},[t._v("üë•")]),t._v(" "),e("div",[e("div",{staticClass:"text-muted small"},[t._v(t._s(t.$t("Total_Clients")))]),t._v(" "),e("div",{staticClass:"h4 mb-0"},[t._v(t._s(t.clientStats.total))])])])])],1),t._v(" "),e("b-col",{staticClass:"mb-3",attrs:{md:"3"}},[e("b-card",{staticClass:"h-100 shadow-sm border-0",staticStyle:{background:"linear-gradient(135deg,#dcfce7,#bbf7d0)"}},[e("div",{staticClass:"d-flex align-items-center"},[e("div",{staticClass:"mr-3",staticStyle:{"font-size":"26px"}},[t._v("‚úÖ")]),t._v(" "),e("div",[e("div",{staticClass:"text-muted small"},[t._v(t._s(t.$t("Synced")))]),t._v(" "),e("div",{staticClass:"h4 mb-0"},[t._v(t._s(t.clientStats.synced))])])])])],1),t._v(" "),e("b-col",{staticClass:"mb-3",attrs:{md:"3"}},[e("b-card",{staticClass:"h-100 shadow-sm border-0",staticStyle:{background:"linear-gradient(135deg,#fee2e2,#fecaca)"}},[e("div",{staticClass:"d-flex align-items-center"},[e("div",{staticClass:"mr-3",staticStyle:{"font-size":"26px"}},[t._v("‚ö†Ô∏è")]),t._v(" "),e("div",[e("div",{staticClass:"text-muted small"},[t._v(t._s(t.$t("Not_Synced")))]),t._v(" "),e("div",{staticClass:"h4 mb-0"},[t._v(t._s(t.clientStats.not_synced))])])])])],1),t._v(" "),e("b-col",{staticClass:"mb-3",attrs:{md:"3"}},[e("b-card",{staticClass:"h-100 shadow-sm border-0 d-flex align-items-center justify-content-center"},[e("div",{staticClass:"text-center"},[e("b-button",{attrs:{variant:"primary",size:"lg",disabled:t.syncingClients||!t.status.has_token||0===t.clientStats.not_synced},on:{click:t.syncAllClients}},[t.syncingClients?e("span",[e("i",{staticClass:"fa fa-spinner fa-spin"}),t._v(" "+t._s(t.$t("Syncing"))+"...")]):e("span",[t._v(t._s(t.$t("Sync_All_Clients")))])]),t._v(" "),e("div",{staticClass:"small text-muted mt-2"},[t._v(t._s(t.$t("Bulk_sync_unsynced_clients")))])],1)])],1)],1),t._v(" "),e("div",{staticClass:"w-100 mb-3"},[e("div",{staticClass:"d-flex justify-content-between align-items-center mb-1"},[e("small",{staticClass:"text-muted"},[t._v(t._s(t.$t("Overall_progress")))]),t._v(" "),e("small",{staticClass:"text-muted"},[t._v(t._s(t.syncPercent)+"%")])]),t._v(" "),e("b-progress",{attrs:{value:t.clientStats.synced,max:t.clientStats.total,height:"10px"}})],1),t._v(" "),e("div",{staticClass:"w-100"},[e("div",{staticClass:"d-flex align-items-center justify-content-between mb-2"},[e("b-input-group",{staticClass:"w-50",attrs:{size:"sm"}},[e("b-form-input",{attrs:{placeholder:t.$t("Search_unsynced_by_name_email")},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loadUnsynced(1)}},model:{value:t.search,callback:function(e){t.search="string"==typeof e?e.trim():e},expression:"search"}}),t._v(" "),e("b-input-group-append",[e("b-button",{attrs:{size:"sm",variant:"outline-secondary"},on:{click:function(e){return t.loadUnsynced(1)}}},[t._v(t._s(t.$t("Search")))])],1)],1),t._v(" "),e("div",[e("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"outline-secondary"},on:{click:t.loadClientStats}},[t._v(t._s(t.$t("Refresh_Stats")))]),t._v(" "),e("b-button",{attrs:{size:"sm",variant:"outline-secondary"},on:{click:function(e){return t.loadUnsynced(t.page)}}},[t._v(t._s(t.$t("Refresh_List")))])],1)],1),t._v(" "),e("b-table",{attrs:{small:"",hover:"",items:t.unsynced.items,fields:t.unsyncedFields,busy:t.unsyncedBusy,"primary-key":"id","show-empty":"","empty-text":t.$t("All_clients_are_synced")+" üéâ"},scopedSlots:t._u([{key:"cell(select)",fn:function(n){return[e("b-form-checkbox",{attrs:{value:n.item.id},model:{value:t.selectedIds,callback:function(e){t.selectedIds=e},expression:"selectedIds"}})]}},{key:"cell(name)",fn:function(n){return[e("div",{staticClass:"font-weight-600"},[t._v(t._s(n.item.name||"-"))]),t._v(" "),e("div",{staticClass:"text-muted small"},[t._v(t._s(n.item.email||"-"))])]}},{key:"cell(created_at)",fn:function(n){return[e("div",[t._v(t._s(t.fmtDate(n.item.created_at)))]),t._v(" "),e("div",{staticClass:"text-muted small"},[t._v(t._s(t.fmtTime(n.item.created_at)))])]}},{key:"cell(actions)",fn:function(n){return[e("b-button",{attrs:{size:"sm",variant:"success",disabled:t.syncingRowId===n.item.id||!t.status.has_token},on:{click:function(e){return t.syncOne(n.item)}}},[t.syncingRowId!==n.item.id?e("span",[t._v(t._s(t.$t("Sync")))]):e("span",[e("i",{staticClass:"fa fa-spinner fa-spin"})])])]}}],null,!1,809055922)}),t._v(" "),e("div",{staticClass:"d-flex justify-content-between align-items-center mt-2"},[e("div",[e("b-button",{staticClass:"mr-2",attrs:{size:"sm",variant:"primary",disabled:0===t.selectedIds.length||t.syncingClients||!t.status.has_token},on:{click:t.syncSelected}},[t._v("\n                  "+t._s(t.$t("Sync_Selected"))+" ("+t._s(t.selectedIds.length)+")\n                ")]),t._v(" "),e("b-button",{attrs:{size:"sm",variant:"outline-secondary"},on:{click:function(e){t.selectedIds=[]}}},[t._v(t._s(t.$t("Clear_Selection")))])],1),t._v(" "),e("div",[e("b-button",{attrs:{size:"sm",disabled:t.page<=1},on:{click:function(e){return t.loadUnsynced(t.page-1)}}},[t._v(t._s(t.$t("Prev")))]),t._v(" "),e("span",{staticClass:"mx-2"},[t._v(t._s(t.$t("Page"))+" "+t._s(t.page)+" / "+t._s(t.unsynced.last_page||1))]),t._v(" "),e("b-button",{attrs:{size:"sm",disabled:t.page>=t.unsynced.last_page},on:{click:function(e){return t.loadUnsynced(t.page+1)}}},[t._v(t._s(t.$t("Next")))])],1)]),t._v(" "),t.syncReport?e("b-alert",{staticClass:"mt-3",attrs:{show:"",variant:(t.syncReport.failed_count||0)>0?"warning":"success"}},[e("div",{staticClass:"mb-1"},[t._v("\n                "+t._s(t.$t("Synced"))+": "),e("strong",[t._v(t._s(t.syncReport.synced_count))]),t._v(",\n                "+t._s(t.$t("Failed"))+": "),e("strong",[t._v(t._s(t.syncReport.failed_count||0))])]),t._v(" "),(t.syncReport.failures||[]).length?e("div",{staticClass:"small"},[e("details",[e("summary",[t._v(t._s(t.$t("Show_failures")))]),t._v(" "),e("ul",{staticClass:"mb-0 mt-2"},t._l(t.syncReport.failures,function(n){return e("li",{key:n.id},[t._v("\n                      #"+t._s(n.id)+" ‚Äî "+t._s(n.name||"("+t.$t("no_name")+")")+" ‚Äî "),e("code",[t._v(t._s(n.error))])])}),0)])]):t._e()]):t._e()],1),t._v(" "),e("div",{staticClass:"mt-4 text-muted small"},[e("strong",[t._v(t._s(t.$t("notes"))+":")]),t._v(" "),e("ul",{staticClass:"mb-0"},[e("li",[t._v(t._s(t.$t("Only_clients_without_quickbooks_customer_id_are_candidates")))]),t._v(" "),e("li",[t._v(t._s(t.$t("If_matching_email_exists_reuse_instead_of_duplicate")))])])])],1)]),t._v(" "),e("b-tab",{attrs:{title:t.$t("Audit")}},[e("div",{staticClass:"row border rounded p-3 mt-3",staticStyle:{width:"100%"}},[e("div",{staticClass:"d-flex align-items-center mb-2"},[e("b-form-select",{staticClass:"mr-2",attrs:{options:t.levelOptions},on:{change:function(e){return t.loadAudits(1)}},model:{value:t.level,callback:function(e){t.level=e},expression:"level"}}),t._v(" "),e("b-button",{attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(e){return t.loadAudits(t.page)}}},[t._v(t._s(t.$t("Refresh")))])],1),t._v(" "),e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-sm table-striped"},[e("thead",[e("tr",[e("th",[t._v("#")]),t._v(" "),e("th",[t._v(t._s(t.$t("When")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Operation")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Level")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Sale")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Realm_ID")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Env")))]),t._v(" "),e("th",[t._v(t._s(t.$t("Message")))]),t._v(" "),e("th",[t._v("HTTP")])])]),t._v(" "),e("tbody",t._l(t.audits.data,function(n){return e("tr",{key:n.id},[e("td",[t._v(t._s(n.id))]),t._v(" "),e("td",[t._v(t._s(t.fmtWhen(n.created_at)))]),t._v(" "),e("td",[t._v(t._s(n.operation))]),t._v(" "),e("td",[e("span",{class:t.badge(n.level)},[t._v(t._s(n.level))])]),t._v(" "),e("td",[t._v(t._s(n.sale_id||"-"))]),t._v(" "),e("td",[t._v(t._s(n.realm_id||"-"))]),t._v(" "),e("td",[t._v(t._s(n.environment))]),t._v(" "),e("td",{staticClass:"text-truncate",staticStyle:{"max-width":"300px"}},[t._v(t._s(n.message))]),t._v(" "),e("td",[t._v(t._s(n.http_code||"-"))])])}),0)])]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("span",[t._v(t._s(t.$t("Total"))+": "+t._s(t.audits.total))]),t._v(" "),e("div",[e("b-button",{attrs:{size:"sm",disabled:!t.audits.prev_page_url},on:{click:function(e){return t.loadAudits(t.page-1)}}},[t._v(t._s(t.$t("Prev")))]),t._v(" "),e("span",{staticClass:"mx-2"},[t._v(t._s(t.$t("Page"))+" "+t._s(t.page)+" / "+t._s(t.audits.last_page||1))]),t._v(" "),e("b-button",{attrs:{size:"sm",disabled:!t.audits.next_page_url},on:{click:function(e){return t.loadAudits(t.page+1)}}},[t._v(t._s(t.$t("Next")))])],1)])])])],1)],1)],1)},[],!1,null,null,null).exports}}]);
/*! For license information please see Zero_Sales_Products_Report.2a30b65139e1129a.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8072],{1373:(t,e,r)=>{r.r(e),r.d(e,{default:()=>g});var n=r(5947),a=r.n(n);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(){var t,e,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",a=r.toStringTag||"@@toStringTag";function o(r,n,a,o){var i=n&&n.prototype instanceof c?n:c,d=Object.create(i.prototype);return s(d,"_invoke",function(r,n,a){var o,i,s,c=0,d=a||[],u=!1,p={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,r){return o=e,i=0,s=t,p.n=r,l}};function f(r,n){for(i=r,s=n,e=0;!u&&c&&!a&&e<d.length;e++){var a,o=d[e],f=p.p,h=o[2];r>3?(a=h===n)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=f&&((a=r<2&&f<o[1])?(i=0,p.v=n,p.n=o[1]):f<h&&(a=r<3||o[0]>n||n>h)&&(o[4]=r,o[5]=n,p.n=h,i=0))}if(a||r>1)return l;throw u=!0,n}return function(a,d,h){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&f(d,h),i=d,s=h;(e=i<2?t:s)||!u;){o||(i?i<3?(i>1&&(p.n=-1),f(i,s)):p.n=s:p.v=s);try{if(c=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=t}else if((e=(u=p.n<0)?s:r.call(n,p))!==l)break}catch(e){o=t,i=1,s=e}finally{c=1}}return{value:e,done:u}}}(r,a,o),!0),d}var l={};function c(){}function d(){}function u(){}e=Object.getPrototypeOf;var p=[][n]?e(e([][n]())):(s(e={},n,function(){return this}),e),f=u.prototype=c.prototype=Object.create(p);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,s(t,a,"GeneratorFunction")),t.prototype=Object.create(f),t}return d.prototype=u,s(f,"constructor",u),s(u,"constructor",d),d.displayName="GeneratorFunction",s(u,a,"GeneratorFunction"),s(f),s(f,a,"Generator"),s(f,n,function(){return this}),s(f,"toString",function(){return"[object Generator]"}),(i=function(){return{w:o,m:h}})()}function s(t,e,r,n){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}s=function(t,e,r,n){function o(e,r){s(t,e,function(t){return this._invoke(e,r,t)})}e?a?a(t,e,{value:r,enumerable:!n,configurable:!n,writable:!n}):t[e]=r:(o("next",0),o("throw",1),o("return",2))},s(t,e,r,n)}function l(t,e,r,n,a,o,i){try{var s=t[o](i),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,a)}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(Object(r),!0).forEach(function(e){u(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const p={metaInfo:{title:"Zero Sales Products Report"},data:function(){return{isLoading:!0,serverParams:{sort:{field:"last_sale_at",type:"asc"},page:1,perPage:10},limit:10,search:"",totalRows:0,products:[],rows:[{children:[]}],period:30,periodOptions:[{value:"all",text:this.$t("All_time")||"All time"},{value:30,text:this.$t("Last_30_days")||"Last 30 days"},{value:60,text:this.$t("Last_60_days")||"Last 60 days"},{value:90,text:this.$t("Last_90_days")||"Last 90 days"}],warehouse_id:null,brand_id:null,category_id:null}},computed:d(d({},(0,r(95353).L8)(["currentUser"])),{},{columns:function(){return[{label:this.$t("Code"),field:"code",tdClass:"text-left",thClass:"text-left",sortable:!0},{label:this.$t("Product"),field:"name",tdClass:"text-left",thClass:"text-left",sortable:!0},{label:this.$t("Price"),field:"price",type:"decimal",tdClass:"text-left",thClass:"text-left",sortable:!0},{label:this.$t("LastSale"),field:"last_sale_at",tdClass:"text-left",thClass:"text-left",sortable:!0},{label:this.$t("DaysSinceLastSale"),field:"days_since_last_sale",type:"number",tdClass:"text-left",thClass:"text-left",sortable:!0}]}}),methods:{updateParams:function(t){this.serverParams=Object.assign({},this.serverParams,t)},onPageChange:function(t){var e=t.currentPage;this.serverParams.page!==e&&(this.updateParams({page:e}),this.Get_Zero_Sales_Products(e))},onPerPageChange:function(t){var e=t.currentPerPage;this.limit!==e&&(this.limit=e,this.updateParams({page:1,perPage:e}),this.Get_Zero_Sales_Products(1))},onSortChange:function(t){var e=Array.isArray(t)&&t.length?t[0]:null;e&&(this.updateParams({sort:{type:e.type,field:e.field}}),this.Get_Zero_Sales_Products(this.serverParams.page))},onSearch:function(t){this.search=t.searchTerm||"",this.updateParams({page:1}),this.Get_Zero_Sales_Products(1)},onPeriodChange:function(){this.updateParams({page:1}),this.Get_Zero_Sales_Products(1)},Get_Zero_Sales_Products:function(t){var e=this;a().start(),a().set(.1);var r=new URLSearchParams({page:String(t),SortField:this.serverParams.sort.field||"last_sale_at",SortType:this.serverParams.sort.type||"asc",search:this.search||"",limit:String(this.limit),period:String(this.period)});this.warehouse_id&&r.append("warehouse_id",this.warehouse_id),this.brand_id&&r.append("brand_id",this.brand_id),this.category_id&&r.append("category_id",this.category_id),axios.get("report/zero_sales_products?".concat(r.toString())).then(function(t){var r=t.data;e.products=r.report||[],e.totalRows=r.totalRows||0,e.rows[0].children=e.products,a().done(),e.isLoading=!1}).catch(function(){a().done(),setTimeout(function(){e.isLoading=!1},300)})},exportPdf:function(){var t,e=this;return(t=i().m(function t(){var n,o,s,l,c,d,u,p,f,h,v,m,g,_,b,y,P,S,w,x,C,$,O,j,L,T,F,z,A;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,a().start(),a().set(.2),t.n=1,r.e(4733).then(r.bind(r,94733));case 1:return l=t.v,c=l.jsPDF,t.n=2,r.e(5708).then(r.bind(r,25708));case 2:return d=t.v.default,u=new URLSearchParams({page:"1",limit:"-1",SortField:(null===(n=e.serverParams)||void 0===n||null===(n=n.sort)||void 0===n?void 0:n.field)||"last_sale_at",SortType:(null===(o=e.serverParams)||void 0===o||null===(o=o.sort)||void 0===o?void 0:o.type)||"asc",search:e.search||"",period:String(e.period)}),e.warehouse_id&&u.append("warehouse_id",e.warehouse_id),e.brand_id&&u.append("brand_id",e.brand_id),e.category_id&&u.append("category_id",e.category_id),t.n=3,axios.get("report/zero_sales_products?".concat(u.toString())).catch(function(){return{data:{}}});case 3:p=t.v,f=p.data,h=Array.isArray(null==f?void 0:f.report)?f.report:[],v=new c({orientation:"landscape",unit:"pt",format:"a4"}),m="/fonts/Vazirmatn-Bold.ttf";try{v.addFont(m,"Vazirmatn","normal"),v.addFont(m,"Vazirmatn","bold")}catch(t){}v.setFont("Vazirmatn","normal"),g=e.$i18n&&["ar","fa","ur","he"].includes(e.$i18n.locale)||"undefined"!=typeof document&&"rtl"===document.documentElement.dir,_=40,b=v.internal.pageSize.getWidth(),v.setFont("Vazirmatn","bold"),v.setFontSize(16),y="Zero Sales Products Report",g?v.text(y,b-_,36,{align:"right"}):v.text(y,_,36),v.setFont("Vazirmatn","normal"),v.setFontSize(10),P=(null===(s=(e.periodOptions||[]).find(function(t){return String(t.value)===String(e.period)}))||void 0===s?void 0:s.text)||String(e.period),S=["".concat(e.$t?e.$t("Period"):"Period",": ").concat(P),e.warehouse_id?"".concat(e.$t?e.$t("warehouse"):"Warehouse",": ").concat(e.warehouse_id):null,e.brand_id?"".concat(e.$t?e.$t("Brand"):"Brand",": ").concat(e.brand_id):null,e.category_id?"".concat(e.$t?e.$t("Category"):"Category",": ").concat(e.category_id):null,e.search?"".concat(e.$t?e.$t("Search_this_table"):"Search",': "').concat(e.search,'"'):null].filter(Boolean).join("   •   "),w=v.splitTextToSize(S,b-80),g?v.text(w,b-_,56,{align:"right"}):v.text(w,_,56),x=e.$t?e.$t("Code"):"Code",C=e.$t?e.$t("Product"):"Product",$=e.$t?e.$t("Price"):"Price",O=e.$t?e.$t("LastSale"):"Last sale",j=e.$t?e.$t("DaysSinceLastSale"):"Days since last sale",L=e.$t?e.$t("Never_Sold"):"Never Sold",T=[[x,C,$,O,j]],F=h.map(function(t){var e,r,n;return[t.code||"",t.name||"","number"==typeof t.price?t.price.toFixed(2):null!==(e=t.price)&&void 0!==e?e:"",null!==(r=t.last_sale_at)&&void 0!==r?r:"—",t.last_sale_at?null!==(n=t.days_since_last_sale)&&void 0!==n?n:"":L]}),d(v,{startY:74,head:T,body:F,margin:{left:_,right:_},theme:"striped",styles:{font:"Vazirmatn",fontStyle:"normal",fontSize:9,cellPadding:6,overflow:"linebreak",halign:g?"right":"left"},headStyles:{font:"Vazirmatn",fontStyle:"bold",fillColor:[26,86,219],textColor:255,halign:g?"right":"left"},columnStyles:{2:{halign:"right"},4:{halign:"right"}},didDrawPage:function(t){v.setFont("Vazirmatn","normal"),v.setFontSize(8);var e=v.internal.pageSize.getHeight(),r="".concat(t.pageNumber," / ").concat(v.internal.getNumberOfPages());g?v.text(r,_,e-14,{align:"left"}):v.text(r,b-_,e-14,{align:"right"})}}),z=(new Date).toISOString().slice(0,19).replace(/[:T]/g,"-"),A="zero_sales_products_".concat(String(e.period),"_").concat(z,".pdf"),v.save(A),t.n=5;break;case 4:t.p=4,t.v,e.$bvToast&&e.$bvToast.toast(e.$t?e.$t("Export_Failed"):"Export failed",{variant:"danger",solid:!0});case 5:return t.p=5,a().done(),t.f(5);case 6:return t.a(2)}},t,null,[[0,4,5,6]])}),function(){var e=this,r=arguments;return new Promise(function(n,a){var o=t.apply(e,r);function i(t){l(o,n,a,i,s,"next",t)}function s(t){l(o,n,a,i,s,"throw",t)}i(void 0)})})()}},created:function(){this.Get_Zero_Sales_Products(1)}};var f=r(85072),h=r.n(f),v=r(10995),m={insert:"head",singleton:!1};h()(v.A,m);v.A.locals;const g=(0,r(14486).A)(p,function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("breadcumb",{attrs:{page:t.$t("Zero_Sales_Products_Report"),folder:t.$t("Reports")}}),t._v(" "),t.isLoading?e("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):t._e(),t._v(" "),t.isLoading?t._e():e("b-card",{staticClass:"wrapper"},[e("div",{staticClass:"d-flex flex-wrap align-items-center mb-2"},[e("div",{staticClass:"d-flex align-items-center mr-3 mb-2"},[e("label",{staticClass:"mb-0 mr-2"},[t._v(t._s(t.$t("Period"))+":")]),t._v(" "),e("b-form-select",{staticClass:"w-auto",attrs:{options:t.periodOptions,size:"sm"},on:{change:t.onPeriodChange},model:{value:t.period,callback:function(e){t.period=e},expression:"period"}})],1),t._v(" "),e("div",{staticClass:"ml-auto mb-2"},[e("b-button",{staticClass:"btn-pill",attrs:{size:"sm",variant:"danger"},on:{click:t.exportPdf}},[e("i",{staticClass:"i-File-PDF mr-1"}),t._v(" Export PDF\n        ")])],1)]),t._v(" "),e("vue-good-table",{attrs:{mode:"remote",columns:t.columns,totalRows:t.totalRows,rows:t.rows,"group-options":{enabled:!0,headerPosition:"bottom"},"search-options":{placeholder:t.$t("Search_this_table"),enabled:!0},"pagination-options":{enabled:!0,mode:"records",perPage:t.serverParams.perPage,perPageDropdown:[10,20,50,100],dropdownAllowAll:!0,nextLabel:"next",prevLabel:"prev"},styleClass:"tableOne table-hover vgt-table mt-3"},on:{"on-page-change":t.onPageChange,"on-per-page-change":t.onPerPageChange,"on-sort-change":t.onSortChange,"on-search":t.onSearch},scopedSlots:t._u([{key:"table-row",fn:function(r){return["last_sale_at"===r.column.field?e("span",[t._v("\n          "+t._s(r.row.last_sale_at?r.row.last_sale_at:"—")+"\n        ")]):"days_since_last_sale"===r.column.field?e("span",[r.row.last_sale_at?e("span",[t._v(t._s(r.row.days_since_last_sale))]):e("b-badge",{attrs:{variant:"warning"}},[t._v("\n            "+t._s(t.$t("Never_Sold"))+"\n          ")])],1):e("span",[t._v("\n          "+t._s(r.formattedRow[r.column.field])+"\n        ")])]}}],null,!1,624551675)})],1)],1)},[],!1,null,"5da9192c",null).exports},10995:(t,e,r)=>{r.d(e,{A:()=>o});var n=r(76314),a=r.n(n)()(function(t){return t[1]});a.push([t.id,".btn-pill[data-v-5da9192c]{border-radius:999px}",""]);const o=a},76314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=t(e);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r}).join("")},e.i=function(t,r,n){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(n)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(a[i]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);n&&a[l[0]]||(r&&(l[2]?l[2]="".concat(r," and ").concat(l[2]):l[2]=r),e.push(l))}},e}},85072:(t,e,r)=>{var n,a=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}(),i=[];function s(t){for(var e=-1,r=0;r<i.length;r++)if(i[r].identifier===t){e=r;break}return e}function l(t,e){for(var r={},n=[],a=0;a<t.length;a++){var o=t[a],l=e.base?o[0]+e.base:o[0],c=r[l]||0,d="".concat(l," ").concat(c);r[l]=c+1;var u=s(d),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(i[u].references++,i[u].updater(p)):i.push({identifier:d,updater:m(p,e),references:1}),n.push(d)}return n}function c(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var a=r.nc;a&&(n.nonce=a)}if(Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])}),"function"==typeof t.insert)t.insert(e);else{var i=o(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var d,u=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n")});function p(t,e,r,n){var a=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=u(e,a);else{var o=document.createTextNode(a),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(o,i[e]):t.appendChild(o)}}function f(t,e,r){var n=r.css,a=r.media,o=r.sourceMap;if(a?t.setAttribute("media",a):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var h=null,v=0;function m(t,e){var r,n,a;if(e.singleton){var o=v++;r=h||(h=c(e)),n=p.bind(null,r,o,!1),a=p.bind(null,r,o,!0)}else r=c(e),n=f.bind(null,r,e),a=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else a()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=a());var r=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<r.length;n++){var a=s(r[n]);i[a].references--}for(var o=l(t,e),c=0;c<r.length;c++){var d=s(r[c]);0===i[d].references&&(i[d].updater(),i.splice(d,1))}r=o}}}}}]);
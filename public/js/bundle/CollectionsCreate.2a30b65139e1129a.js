/*! For license information please see CollectionsCreate.2a30b65139e1129a.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1942],{69291:(t,e,r)=>{r.d(e,{A:()=>s});var a=r(76314),n=r.n(a)()(function(t){return t[1]});n.push([t.id,".text-mono[data-v-40678fb5]{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.card-soft[data-v-40678fb5]{border:1px solid #edf2f7;border-radius:12px}.finder[data-v-40678fb5]{background:#fbfbfd}.results-list[data-v-40678fb5]{max-height:420px;overflow:auto}.result-row[data-v-40678fb5]{align-items:center;border-bottom:1px dashed #e5e7eb;display:flex;gap:.75rem;justify-content:space-between;padding:.5rem 0}.result-row[data-v-40678fb5]:last-child{border-bottom:0}.result-row .thumb[data-v-40678fb5]{background:#f3f4f6;border:1px solid #eef2f7;border-radius:6px;height:40px;margin-right:.5rem;overflow:hidden;width:40px}.result-row .thumb img[data-v-40678fb5]{height:100%;-o-object-fit:cover;object-fit:cover;width:100%}.table .thumb[data-v-40678fb5]{background:#f3f4f6;border:1px solid #eef2f7;border-radius:6px;height:36px;overflow:hidden;width:36px}.table .thumb img[data-v-40678fb5]{height:100%;-o-object-fit:cover;object-fit:cover;width:100%}.empty-state[data-v-40678fb5]{background:#fafafa;border:2px dashed #e2e8f0;border-radius:1rem;padding:2rem;text-align:center}.empty-state .emoji[data-v-40678fb5]{font-size:1.8rem}.empty-state .title[data-v-40678fb5]{font-weight:700;margin-top:.25rem}.empty-state .subtitle[data-v-40678fb5]{color:#6b7280}.side[data-v-40678fb5]{top:88px}.btn-block[data-v-40678fb5]{width:100%}.fw-600[data-v-40678fb5]{font-weight:600}",""]);const s=n},76314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var r=t(e);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r}).join("")},e.i=function(t,r,a){"string"==typeof t&&(t=[[null,t,""]]);var n={};if(a)for(var s=0;s<this.length;s++){var i=this[s][0];null!=i&&(n[i]=!0)}for(var o=0;o<t.length;o++){var c=[].concat(t[o]);a&&n[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),e.push(c))}},e}},79759:(t,e,r)=>{r.r(e),r.d(e,{default:()=>v});function a(){var t,e,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function o(r,a,s,i){var o=a&&a.prototype instanceof l?a:l,d=Object.create(o.prototype);return n(d,"_invoke",function(r,a,n){var s,i,o,l=0,d=n||[],u=!1,v={p:0,n:0,v:t,a:f,f:f.bind(t,4),d:function(e,r){return s=e,i=0,o=t,v.n=r,c}};function f(r,a){for(i=r,o=a,e=0;!u&&l&&!n&&e<d.length;e++){var n,s=d[e],f=v.p,m=s[2];r>3?(n=m===a)&&(o=s[(i=s[4])?5:(i=3,3)],s[4]=s[5]=t):s[0]<=f&&((n=r<2&&f<s[1])?(i=0,v.v=a,v.n=s[1]):f<m&&(n=r<3||s[0]>a||a>m)&&(s[4]=r,s[5]=a,v.n=m,i=0))}if(n||r>1)return c;throw u=!0,a}return function(n,d,m){if(l>1)throw TypeError("Generator is already running");for(u&&1===d&&f(d,m),i=d,o=m;(e=i<2?t:o)||!u;){s||(i?i<3?(i>1&&(v.n=-1),f(i,o)):v.n=o:v.v=o);try{if(l=2,s){if(i||(n="next"),e=s[n]){if(!(e=e.call(s,o)))throw TypeError("iterator result is not an object");if(!e.done)return e;o=e.value,i<2&&(i=0)}else 1===i&&(e=s.return)&&e.call(s),i<2&&(o=TypeError("The iterator does not provide a '"+n+"' method"),i=1);s=t}else if((e=(u=v.n<0)?o:r.call(a,v))!==c)break}catch(e){s=t,i=1,o=e}finally{l=1}}return{value:e,done:u}}}(r,s,i),!0),d}var c={};function l(){}function d(){}function u(){}e=Object.getPrototypeOf;var v=[][s]?e(e([][s]())):(n(e={},s,function(){return this}),e),f=u.prototype=l.prototype=Object.create(v);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,n(t,i,"GeneratorFunction")),t.prototype=Object.create(f),t}return d.prototype=u,n(f,"constructor",u),n(u,"constructor",d),d.displayName="GeneratorFunction",n(u,i,"GeneratorFunction"),n(f),n(f,i,"Generator"),n(f,s,function(){return this}),n(f,"toString",function(){return"[object Generator]"}),(a=function(){return{w:o,m}})()}function n(t,e,r,a){var s=Object.defineProperty;try{s({},"",{})}catch(t){s=0}n=function(t,e,r,a){function i(e,r){n(t,e,function(t){return this._invoke(e,r,t)})}e?s?s(t,e,{value:r,enumerable:!a,configurable:!a,writable:!a}):t[e]=r:(i("next",0),i("throw",1),i("return",2))},n(t,e,r,a)}function s(t,e,r,a,n,s,i){try{var o=t[s](i),c=o.value}catch(t){return void r(t)}o.done?e(c):Promise.resolve(c).then(a,n)}function i(t){return function(){var e=this,r=arguments;return new Promise(function(a,n){var i=t.apply(e,r);function o(t){s(i,a,n,o,c,"next",t)}function c(t){s(i,a,n,o,c,"throw",t)}o(void 0)})}}const o={metaInfo:{title:"Store Collections Create"},data:function(){return{isLoading:!1,saving:!1,form:{title:"",slug:"",description:"",limit:8,sort_order:0},productQuery:"",searching:!1,results:[],selected:[],t:null}},methods:{makeToast:function(t,e,r){this.$root&&this.$root.$bvToast&&this.$root.$bvToast.toast(e,{title:r,variant:t,solid:!0})},slugify:function(t){return String(t||"").toLowerCase().trim().replace(/['"]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")},autoSlug:function(){this.form.slug||(this.form.slug=this.slugify(this.form.title))},debouncedSearch:function(){var t=this;this.t&&clearTimeout(this.t),this.t=setTimeout(function(){t.searchProducts()},300)},searchProducts:function(){var t=this;return i(a().m(function e(){var r,n,s,i,o;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=(t.productQuery||"").trim()){e.n=1;break}return t.results=[],e.a(2);case 1:return t.searching=!0,e.p=2,i=null,e.p=3,e.n=4,axios.get("/admin/store/products",{params:{q:r,limit:20}});case 4:i=e.v,e.n=6;break;case 5:e.p=5,e.v;case 6:o=Array.isArray(null===(n=i)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.data)?i.data.data:Array.isArray(null===(s=i)||void 0===s?void 0:s.data)?i.data:[],t.results=Array.isArray(o)?o:[],e.n=8;break;case 7:e.p=7,e.v,t.makeToast("danger",t.$t("Failed_to_load"),t.$t("Failed"));case 8:return e.p=8,t.searching=!1,e.f(8);case 9:return e.a(2)}},e,null,[[3,5],[2,7,8,9]])}))()},productThumb:function(t){if(t){if(t.thumbnail)return t.thumbnail;if(t.thumb)return t.thumb;if(t.image_url)return t.image_url;if("string"==typeof t.image)return t.image}return""},hasProduct:function(t){return this.selected.some(function(e){return e.product_id===t})},addProduct:function(t){t&&!this.hasProduct(t.id)&&this.selected.push({product_id:t.id,name:t.name?t.name:t.title?t.title:"#"+t.id,sku:t.sku||t.code||"",pinned:!1,thumb:this.productThumb(t)})},remove:function(t){this.selected.splice(t,1)},move:function(t,e){var r=t+e;if(!(r<0||r>=this.selected.length)){var a=this.selected.splice(t,1)[0];this.selected.splice(r,0,a)}},clearSelected:function(){this.selected.length&&confirm(this.$t("Confirm_Clear_All"))&&(this.selected=[])},itemsPayload:function(){return this.selected.map(function(t,e){return{product_id:t.product_id,sort_order:10*(e+1),pinned:!!t.pinned}})},save:function(){var t=this;return i(a().m(function e(){var r,n;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.form.title&&t.form.slug){e.n=1;break}return t.makeToast("danger",t.$t("Title_and_Slug_required"),t.$t("Invalid")),e.a(2,null);case 1:return t.saving=!0,e.p=2,e.n=3,axios.post("/admin/store/collections",t.form);case 3:if(r=e.v,n=r&&r.data&&r.data.id?r.data.id:null){e.n=4;break}throw new Error("No ID returned");case 4:if(!t.selected.length){e.n=8;break}return e.p=5,e.n=6,axios.post("/admin/store/collections/".concat(n,"/products"),{items:t.itemsPayload()});case 6:e.n=8;break;case 7:e.p=7,e.v,t.makeToast("warning",t.$t("Collection_saved_but_products_not_synced"),t.$t("Warning"));case 8:return t.makeToast("success",t.$t("Successfully_Created"),t.$t("Success")),e.a(2,n);case 9:return e.p=9,e.v,t.makeToast("danger",t.$t("InvalidData"),t.$t("Failed")),e.a(2,null);case 10:return e.p=10,t.saving=!1,e.f(10);case 11:return e.a(2)}},e,null,[[5,7],[2,9,10,11]])}))()},saveAndClose:function(){var t=this;return i(a().m(function e(){return a().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.save();case 1:e.v&&t.$router.push({name:"StoreCollections"});case 2:return e.a(2)}},e)}))()}}};var c=r(85072),l=r.n(c),d=r(69291),u={insert:"head",singleton:!1};l()(d.A,u);d.A.locals;const v=(0,r(14486).A)(o,function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("breadcumb",{attrs:{page:t.$t("New_Collection"),folder:t.$t("Store")}}),t._v(" "),t.isLoading?e("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):e("b-card",{staticClass:"px-0"},[e("b-form",{on:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"col-lg-8 p-3 p-lg-4"},[e("div",{staticClass:"card card-soft shadow-sm mb-4"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"d-flex align-items-center justify-content-between flex-wrap mb-2"},[e("h5",{staticClass:"mb-0"},[t._v(t._s(t.$t("Collection_Details")))]),t._v(" "),e("b-badge",{staticClass:"text-mono",attrs:{pill:"",variant:"light"}},[t._v("Draft")])],1),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-8"},[e("b-form-group",{attrs:{label:t.$t("Title")}},[e("b-form-input",{attrs:{required:""},on:{input:t.autoSlug},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title","string"==typeof e?e.trim():e)},expression:"form.title"}})],1)],1)]),t._v(" "),e("b-form-group",{attrs:{label:t.$t("Slug")}},[e("b-input-group",[e("b-input-group-prepend",{attrs:{"is-text":""}},[t._v("/collections/")]),t._v(" "),e("b-form-input",{attrs:{required:""},model:{value:t.form.slug,callback:function(e){t.$set(t.form,"slug","string"==typeof e?e.trim():e)},expression:"form.slug"}})],1)],1),t._v(" "),e("b-form-group",{attrs:{label:t.$t("Description")}},[e("b-form-textarea",{attrs:{rows:"3"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description","string"==typeof e?e.trim():e)},expression:"form.description"}})],1),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"},[e("b-form-group",{attrs:{label:t.$t("Limit")}},[e("b-form-input",{attrs:{type:"text",min:"1"},model:{value:t.form.limit,callback:function(e){t.$set(t.form,"limit",t._n(e))},expression:"form.limit"}})],1)],1)])],1)])]),t._v(" "),e("div",{staticClass:"col-lg-4 p-3 p-lg-4"},[e("div",{staticClass:"side sticky-top"},[e("div",{staticClass:"card shadow-sm"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"d-grid gap-2"},[e("b-button",{attrs:{disabled:t.saving,type:"submit",variant:"btn btn-primary btn-block"}},[t.saving?e("span",{staticClass:"spinner-border spinner-border-sm mr-2"}):t._e(),t._v(" "),e("i",{staticClass:"i-Yes"}),t._v(" "+t._s(t.$t("Save"))+"\n                  ")]),t._v(" "),e("b-button",{attrs:{disabled:t.saving,variant:"btn btn-outline-secondary btn-block"},on:{click:t.saveAndClose}},[e("i",{staticClass:"i-Yes"}),t._v(" "+t._s(t.$t("Save_and_Close"))+"\n                  ")]),t._v(" "),e("router-link",{staticClass:"btn btn-outline-dark btn-block",attrs:{to:{name:"StoreCollections"}}},[t._v("\n                    "+t._s(t.$t("Cancel"))+"\n                  ")])],1)])]),t._v(" "),e("div",{staticClass:"helper mt-3"},[e("div",{staticClass:"small text-muted"},[t._v("\n                ðŸ’¡ "+t._s(t.$t("Tip_reorder_products_for_priority"))+"\n              ")])])])])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 p-3 p-lg-4"},[e("div",{staticClass:"card card-soft shadow-sm"},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"d-flex align-items-center justify-content-between flex-wrap"},[e("h5",{staticClass:"mb-2"},[t._v(t._s(t.$t("Products_in_Collection")))]),t._v(" "),e("div",{staticClass:"small text-muted"},[t._v("\n                  "+t._s(t.selected.length)+" "+t._s(t.$t("selected"))+"\n                  "),t.form.limit?e("span",[t._v(" â€¢ "+t._s(t.$t("Display_limit"))+": "+t._s(t.form.limit))]):t._e()])]),t._v(" "),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-lg-6"},[e("div",{staticClass:"finder border rounded p-3"},[e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("b-input-group",[e("b-form-input",{attrs:{placeholder:t.$t("Search_products")+"â€¦"},on:{input:t.debouncedSearch},model:{value:t.productQuery,callback:function(e){t.productQuery="string"==typeof e?e.trim():e},expression:"productQuery"}}),t._v(" "),e("b-input-group-append",[e("b-button",{attrs:{disabled:t.searching,variant:"outline-secondary"},on:{click:t.searchProducts}},[t.searching?e("span",{staticClass:"spinner-border spinner-border-sm mr-1"}):e("i",{staticClass:"i-Search-People"})])],1)],1)],1),t._v(" "),t.searching||!t.productQuery||t.results.length?t._e():e("div",{staticClass:"small text-muted mt-1"},[t._v("\n                      "+t._s(t.$t("No_results"))+"\n                    ")]),t._v(" "),e("div",{staticClass:"results-list mt-3"},[t._l(t.results,function(r){return e("div",{key:"r-"+r.id,staticClass:"result-row"},[e("div",{staticClass:"d-flex align-items-center"},[t.productThumb(r)?e("div",{staticClass:"thumb"},[e("img",{attrs:{src:t.productThumb(r),alt:"thumb"}})]):t._e(),t._v(" "),e("div",{staticClass:"text-truncate"},[e("div",{staticClass:"fw-600"},[t._v("\n                              "+t._s(r.name?r.name:r.title?r.title:"#"+r.id)+"\n                            ")]),t._v(" "),e("div",{staticClass:"small text-muted"},[t._v("\n                              #"+t._s(r.id)+"\n                              "),r.code||r.sku?e("span",[t._v("â€¢ "+t._s(r.code||r.sku))]):t._e(),t._v(" "),Array.isArray(r.variants)&&r.variants.length?e("span",[t._v("â€¢ "+t._s(r.variants.length)+" "+t._s(t.$t("variants")))]):t._e()])])]),t._v(" "),e("div",[e("b-button",{attrs:{size:"sm",variant:"outline-primary",disabled:t.hasProduct(r.id)},on:{click:function(e){return t.addProduct(r)}}},[t._v("\n                            "+t._s(t.hasProduct(r.id)?t.$t("Added"):t.$t("Add"))+"\n                          ")])],1)])}),t._v(" "),t.productQuery||t.results.length||t.searching?t._e():e("div",{staticClass:"empty-state mt-3"},[e("div",{staticClass:"emoji"},[t._v("ðŸ”Ž")]),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("Start_typing_to_search")))]),t._v(" "),e("div",{staticClass:"subtitle"},[t._v(t._s(t.$t("Search_by_name_SKU_or_ID")))])])],2)])]),t._v(" "),e("div",{staticClass:"col-lg-6 mt-3 mt-lg-0"},[e("div",{staticClass:"border rounded p-3"},[t.selected.length?e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-sm align-middle"},[e("thead",[e("tr",[e("th",{staticStyle:{width:"60px"}},[t._v("#")]),t._v(" "),e("th",[t._v(t._s(t.$t("Product")))]),t._v(" "),e("th",{staticClass:"text-right",staticStyle:{width:"220px"}},[t._v(t._s(t.$t("Actions")))])])]),t._v(" "),e("tbody",t._l(t.selected,function(r,a){return e("tr",{key:"s-"+r.product_id},[e("td",[e("code",{staticClass:"small"},[t._v(t._s(a+1))])]),t._v(" "),e("td",[e("div",{staticClass:"d-flex align-items-center"},[r.thumb?e("div",{staticClass:"thumb mr-2"},[e("img",{attrs:{src:r.thumb,alt:"thumb"}})]):t._e(),t._v(" "),e("div",[e("div",{staticClass:"fw-600"},[t._v(t._s(r.name))]),t._v(" "),e("small",{staticClass:"text-muted"},[t._v("#"+t._s(r.product_id)+" "),r.sku?e("span",[t._v("â€¢ "+t._s(r.sku))]):t._e()])])])]),t._v(" "),e("td",{staticClass:"text-right"},[e("div",{staticClass:"btn-group btn-group-sm"},[e("b-button",{attrs:{variant:"outline-secondary",disabled:0===a},on:{click:function(e){return t.move(a,-1)}}},[t._v("â†‘")]),t._v(" "),e("b-button",{attrs:{variant:"outline-secondary",disabled:a===t.selected.length-1},on:{click:function(e){return t.move(a,1)}}},[t._v("â†“")]),t._v(" "),e("b-button",{attrs:{variant:"outline-danger"},on:{click:function(e){return t.remove(a)}}},[t._v(t._s(t.$t("Remove")))])],1)])])}),0)]),t._v(" "),e("div",{staticClass:"d-flex align-items-center justify-content-between mt-2"},[e("div",{staticClass:"small text-muted"},[t._v("\n                          "+t._s(t.$t("Order_determines_display_priority"))+"\n                        ")]),t._v(" "),e("div",[e("b-button",{attrs:{size:"sm",variant:"outline-danger",disabled:!t.selected.length},on:{click:t.clearSelected}},[t._v("\n                            "+t._s(t.$t("Clear_all"))+"\n                          ")])],1)])]):e("div",{staticClass:"empty-state"},[e("div",{staticClass:"emoji"},[t._v("ðŸ§º")]),t._v(" "),e("div",{staticClass:"title"},[t._v(t._s(t.$t("No_products_in_collection_yet")))]),t._v(" "),e("div",{staticClass:"subtitle"},[t._v(t._s(t.$t("Use_search_to_add_products")))])])])])])])])])])])],1)],1)},[],!1,null,"40678fb5",null).exports},85072:(t,e,r)=>{var a,n=function(){return void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a},s=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}(),i=[];function o(t){for(var e=-1,r=0;r<i.length;r++)if(i[r].identifier===t){e=r;break}return e}function c(t,e){for(var r={},a=[],n=0;n<t.length;n++){var s=t[n],c=e.base?s[0]+e.base:s[0],l=r[c]||0,d="".concat(c," ").concat(l);r[c]=l+1;var u=o(d),v={css:s[1],media:s[2],sourceMap:s[3]};-1!==u?(i[u].references++,i[u].updater(v)):i.push({identifier:d,updater:b(v,e),references:1}),a.push(d)}return a}function l(t){var e=document.createElement("style"),a=t.attributes||{};if(void 0===a.nonce){var n=r.nc;n&&(a.nonce=n)}if(Object.keys(a).forEach(function(t){e.setAttribute(t,a[t])}),"function"==typeof t.insert)t.insert(e);else{var i=s(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var d,u=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n")});function v(t,e,r,a){var n=r?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(t.styleSheet)t.styleSheet.cssText=u(e,n);else{var s=document.createTextNode(n),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(s,i[e]):t.appendChild(s)}}function f(t,e,r){var a=r.css,n=r.media,s=r.sourceMap;if(n?t.setAttribute("media",n):t.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}var m=null,p=0;function b(t,e){var r,a,n;if(e.singleton){var s=p++;r=m||(m=l(e)),a=v.bind(null,r,s,!1),n=v.bind(null,r,s,!0)}else r=l(e),a=f.bind(null,r,e),n=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else n()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=n());var r=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var a=0;a<r.length;a++){var n=o(r[a]);i[n].references--}for(var s=c(t,e),l=0;l<r.length;l++){var d=o(r[l]);0===i[d].references&&(i[d].updater(),i.splice(d,1))}r=s}}}}}]);
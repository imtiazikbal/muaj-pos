/*! For license information please see StoreMessages.2a30b65139e1129a.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4254],{54377:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});function r(){var e,t,n="function"==typeof Symbol?Symbol:{},s=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,s,o){var i=r&&r.prototype instanceof l?r:l,u=Object.create(i.prototype);return a(u,"_invoke",function(n,r,a){var s,o,i,l=0,u=a||[],d=!1,f={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(t,n){return s=t,o=0,i=e,f.n=n,c}};function v(n,r){for(o=n,i=r,t=0;!d&&l&&!a&&t<u.length;t++){var a,s=u[t],v=f.p,p=s[2];n>3?(a=p===r)&&(i=s[(o=s[4])?5:(o=3,3)],s[4]=s[5]=e):s[0]<=v&&((a=n<2&&v<s[1])?(o=0,f.v=r,f.n=s[1]):v<p&&(a=n<3||s[0]>r||r>p)&&(s[4]=n,s[5]=r,f.n=p,o=0))}if(a||n>1)return c;throw d=!0,r}return function(a,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&v(u,p),o=u,i=p;(t=o<2?e:i)||!d;){s||(o?o<3?(o>1&&(f.n=-1),v(o,i)):f.n=i:f.v=i);try{if(l=2,s){if(o||(a="next"),t=s[a]){if(!(t=t.call(s,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,o<2&&(o=0)}else 1===o&&(t=s.return)&&t.call(s),o<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),o=1);s=e}else if((t=(d=f.n<0)?i:n.call(r,f))!==c)break}catch(t){s=e,o=1,i=t}finally{l=1}}return{value:t,done:d}}}(n,s,o),!0),u}var c={};function l(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][s]?t(t([][s]())):(a(t={},s,function(){return this}),t),v=d.prototype=l.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e}return u.prototype=d,a(v,"constructor",d),a(d,"constructor",u),u.displayName="GeneratorFunction",a(d,o,"GeneratorFunction"),a(v),a(v,o,"Generator"),a(v,s,function(){return this}),a(v,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:p}})()}function a(e,t,n,r){var s=Object.defineProperty;try{s({},"",{})}catch(e){s=0}a=function(e,t,n,r){function o(t,n){a(e,t,function(e){return this._invoke(t,n,e)})}t?s?s(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},a(e,t,n,r)}function s(e,t,n,r,a,s,o){try{var i=e[s](o),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){s(o,r,a,i,c,"next",e)}function c(e){s(o,r,a,i,c,"throw",e)}i(void 0)})}}const i={metaInfo:{title:"Store Messages"},data:function(){return{isLoading:!0,searching:!1,rows:[],totalRows:0,searchQuery:"",onlyUnread:!1,t:null,serverParams:{page:1,perPage:10,sort:[{field:"created_at",type:"desc"}]},columns:[{label:this.$t("Name"),field:"name",sortable:!0},{label:this.$t("Email"),field:"email",sortable:!0},{label:this.$t("Subject"),field:"subject",sortable:!0},{label:this.$t("Status"),field:"is_read",sortable:!0},{label:this.$t("Received"),field:"created_at",sortable:!0},{label:this.$t("Actions"),field:"actions"}],selectedMsg:null,loadingOne:!1}},mounted:function(){this.fetch()},methods:{debouncedSearch:function(){var e=this;this.t&&clearTimeout(this.t),this.t=setTimeout(function(){e.fetch()},350)},fetch:function(){var e=this;return o(r().m(function t(){var n,a,s,o;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return e.isLoading=!0,e.searching=!0,t.p=1,n=e.serverParams.sort&&e.serverParams.sort[0]?e.serverParams.sort[0].field:"created_at",a=e.serverParams.sort&&e.serverParams.sort[0]?e.serverParams.sort[0].type:"desc",t.n=2,axios.get("/store/messages",{params:{page:e.serverParams.page,per_page:e.serverParams.perPage,sort:n,dir:a,q:e.searchQuery||"",unread:e.onlyUnread?1:0}});case 2:s=t.v,o=s.data,e.rows=o&&o.data?o.data:[],e.totalRows=o&&o.meta&&void 0!==o.meta.total?o.meta.total:e.rows.length;case 3:return t.p=3,e.isLoading=!1,e.searching=!1,t.f(3);case 4:return t.a(2)}},t,null,[[1,,3,4]])}))()},onPageChange:function(e){var t=e.currentPage;this.serverParams.page=t,this.fetch()},onPerPageChange:function(e){var t=e.currentPerPage;this.serverParams.perPage=t,this.fetch()},onSortChange:function(e){this.serverParams.sort=e[0]?[e[0]]:[],this.fetch()},showMessage:function(e){var t=this;return o(r().m(function n(){var a,s,o;return r().w(function(n){for(;;)switch(n.p=n.n){case 0:return t.loadingOne=!0,t.selectedMsg=null,n.p=1,n.n=2,axios.get("/store/messages/"+e);case 2:a=n.v,s=a.data,t.selectedMsg=s,o=0;case 3:if(!(o<t.rows.length)){n.n=5;break}if(t.rows[o].id!==e){n.n=4;break}return t.rows[o].is_read=!0,n.a(3,5);case 4:o++,n.n=3;break;case 5:t.$bvModal&&t.$bvModal.show("messageModal");case 6:return n.p=6,t.loadingOne=!1,n.f(6);case 7:return n.a(2)}},n,null,[[1,,6,7]])}))()},remove:function(e){var t=this;t.$swal({title:t.$t("Delete_Title"),text:t.$t("Delete_Text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:t.$t("Delete_cancelButtonText"),confirmButtonText:t.$t("Delete_confirmButtonText")}).then(function(n){!(!n||!0!==n.value&&!0!==n.isConfirmed)&&axios.delete("/store/messages/"+e).then(function(){t.$swal(t.$t("Delete_Deleted"),t.$t("Deleted_in_successfully"),"success"),t.fetch()}).catch(function(e){var n=e&&e.response&&e.response.data&&(e.response.data.message||e.response.data.error)||t.$t("Delete_Therewassomethingwronge");t.$swal(t.$t("Delete_Failed"),n,"warning")})})}}};var c=n(85072),l=n.n(c),u=n(69685),d={insert:"head",singleton:!1};l()(u.A,d);u.A.locals;const f=(0,n(14486).A)(i,function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-content"},[t("breadcumb",{attrs:{page:e.$t("Messages"),folder:e.$t("Store")}}),e._v(" "),e.isLoading?t("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):t("b-card",{staticClass:"wrapper"},[t("div",{staticClass:"d-flex flex-wrap align-items-center justify-content-between mb-3"},[t("div",{staticClass:"d-flex align-items-center gap-2"},[t("b-input-group",[t("b-form-input",{attrs:{placeholder:e.$t("Search_by_name_email_subject")+"…"},on:{input:e.debouncedSearch},model:{value:e.searchQuery,callback:function(t){e.searchQuery="string"==typeof t?t.trim():t},expression:"searchQuery"}}),e._v(" "),t("b-input-group-append",[t("b-button",{attrs:{variant:"outline-secondary",disabled:e.searching},on:{click:e.fetch}},[e.searching?t("span",{staticClass:"spinner-border spinner-border-sm mr-1"}):t("i",{staticClass:"i-Search-People"})])],1)],1),e._v(" "),t("b-form-checkbox",{staticClass:"ml-3",on:{change:e.fetch},model:{value:e.onlyUnread,callback:function(t){e.onlyUnread=t},expression:"onlyUnread"}},[e._v("\n          "+e._s(e.$t("Unread_only"))+"\n        ")])],1),e._v(" "),t("div")]),e._v(" "),t("vue-good-table",{attrs:{mode:"remote",columns:e.columns,rows:e.rows,totalRows:e.totalRows,"pagination-options":{enabled:!0,perPage:e.serverParams.perPage},"search-options":{enabled:!1},styleClass:"table-hover tableOne vgt-table"},on:{"on-page-change":e.onPageChange,"on-per-page-change":e.onPerPageChange,"on-sort-change":e.onSortChange},scopedSlots:e._u([{key:"table-row",fn:function(n){return["is_read"===n.column.field?t("span",[t("b-badge",{attrs:{variant:n.row.is_read?"secondary":"warning"}},[e._v("\n            "+e._s(n.row.is_read?e.$t("Read"):e.$t("Unread"))+"\n          ")])],1):"actions"===n.column.field?t("span",[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:e.$t("View")},on:{click:function(t){return e.showMessage(n.row.id)}}},[t("i",{staticClass:"i-Eye text-20 text-primary"})]),e._v(" "),t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"ml-2",attrs:{title:e.$t("Delete")},on:{click:function(t){return e.remove(n.row.id)}}},[t("i",{staticClass:"i-Close-Window text-20 text-danger"})])]):t("span",[e._v("\n          "+e._s(n.formattedRow[n.column.field])+"\n        ")])]}}])})],1),e._v(" "),t("b-modal",{attrs:{id:"messageModal",title:e.selectedMsg&&e.selectedMsg.subject||e.$t("Message"),"ok-only":!0,"ok-variant":"primary","ok-title":e.$t("Close"),size:"lg"},on:{hidden:function(t){e.selectedMsg=null}}},[e.loadingOne?t("div",{staticClass:"text-center my-4"},[t("span",{staticClass:"spinner-border"})]):e.selectedMsg?t("div",[t("div",{staticClass:"mb-2"},[t("div",{staticClass:"small text-muted"},[e._v(e._s(e.$t("From")))]),e._v(" "),t("div",{staticClass:"fw-600"},[e._v("\n          "+e._s(e.selectedMsg.name)+"\n          "),t("span",{staticClass:"text-muted"},[e._v("<"+e._s(e.selectedMsg.email)+">")]),e._v(" "),e.selectedMsg.phone?t("span",{staticClass:"text-muted"},[e._v(" • "+e._s(e.selectedMsg.phone))]):e._e()])]),e._v(" "),t("div",{staticClass:"mb-2"},[t("div",{staticClass:"small text-muted"},[e._v(e._s(e.$t("Subject")))]),e._v(" "),t("div",[e._v(e._s(e.selectedMsg.subject||"—"))])]),e._v(" "),t("div",{staticClass:"mb-2"},[t("div",{staticClass:"small text-muted"},[e._v(e._s(e.$t("Received")))]),e._v(" "),t("div",[e._v(e._s(e.selectedMsg.created_at))])]),e._v(" "),t("hr"),e._v(" "),t("div",{staticClass:"small text-muted mb-1"},[e._v(e._s(e.$t("Message")))]),e._v(" "),t("div",{staticClass:"msg-body"},[e._v(e._s(e.selectedMsg.message))])]):t("div",{staticClass:"text-muted"},[e._v("\n      "+e._s(e.$t("No_message_selected"))+"\n    ")])])],1)},[],!1,null,"db85bbf6",null).exports},69685:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(76314),a=n.n(r)()(function(e){return e[1]});a.push([e.id,".msg-body[data-v-db85bbf6]{white-space:pre-line}",""]);const s=a},76314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n}).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(r)for(var s=0;s<this.length;s++){var o=this[s][0];null!=o&&(a[o]=!0)}for(var i=0;i<e.length;i++){var c=[].concat(e[i]);r&&a[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},85072:(e,t,n)=>{var r,a=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},s=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function i(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],a=0;a<e.length;a++){var s=e[a],c=t.base?s[0]+t.base:s[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var d=i(u),f={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(o[d].references++,o[d].updater(f)):o.push({identifier:u,updater:h(f,t),references:1}),r.push(u)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach(function(e){t.setAttribute(e,r[e])}),"function"==typeof e.insert)e.insert(t);else{var o=s(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var u,d=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function f(e,t,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,a);else{var s=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function v(e,t,n){var r=n.css,a=n.media,s=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,m=0;function h(e,t){var n,r,a;if(t.singleton){var s=m++;n=p||(p=l(t)),r=f.bind(null,n,s,!1),a=f.bind(null,n,s,!0)}else n=l(t),r=v.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=a());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var a=i(n[r]);o[a].references--}for(var s=c(e,t),l=0;l<n.length;l++){var u=i(n[l]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}n=s}}}}}]);
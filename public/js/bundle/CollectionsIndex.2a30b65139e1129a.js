/*! For license information please see CollectionsIndex.2a30b65139e1129a.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5166],{44439:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(76314),i=n.n(r)()(function(t){return t[1]});i.push([t.id,".table td[data-v-57345dca],.table th[data-v-57345dca]{vertical-align:middle}.badge-outline-secondary[data-v-57345dca]{background-color:#fff;border:1px solid #dee2e6;color:#6c757d}.fw-600[data-v-57345dca]{font-weight:600}",""]);const a=i},76314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n}).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var s=this[a][0];null!=s&&(i[s]=!0)}for(var o=0;o<t.length;o++){var c=[].concat(t[o]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},77857:(t,e,n)=>{n.r(e),n.d(e,{default:()=>f});function r(){var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",s=n.toStringTag||"@@toStringTag";function o(n,r,a,s){var o=r&&r.prototype instanceof l?r:l,u=Object.create(o.prototype);return i(u,"_invoke",function(n,r,i){var a,s,o,l=0,u=i||[],d=!1,f={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,n){return a=e,s=0,o=t,f.n=n,c}};function v(n,r){for(s=n,o=r,e=0;!d&&l&&!i&&e<u.length;e++){var i,a=u[e],v=f.p,p=a[2];n>3?(i=p===r)&&(o=a[(s=a[4])?5:(s=3,3)],a[4]=a[5]=t):a[0]<=v&&((i=n<2&&v<a[1])?(s=0,f.v=r,f.n=a[1]):v<p&&(i=n<3||a[0]>r||r>p)&&(a[4]=n,a[5]=r,f.n=p,s=0))}if(i||n>1)return c;throw d=!0,r}return function(i,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&v(u,p),s=u,o=p;(e=s<2?t:o)||!d;){a||(s?s<3?(s>1&&(f.n=-1),v(s,o)):f.n=o:f.v=o);try{if(l=2,a){if(s||(i="next"),e=a[i]){if(!(e=e.call(a,o)))throw TypeError("iterator result is not an object");if(!e.done)return e;o=e.value,s<2&&(s=0)}else 1===s&&(e=a.return)&&e.call(a),s<2&&(o=TypeError("The iterator does not provide a '"+i+"' method"),s=1);a=t}else if((e=(d=f.n<0)?o:n.call(r,f))!==c)break}catch(e){a=t,s=1,o=e}finally{l=1}}return{value:e,done:d}}}(n,a,s),!0),u}var c={};function l(){}function u(){}function d(){}e=Object.getPrototypeOf;var f=[][a]?e(e([][a]())):(i(e={},a,function(){return this}),e),v=d.prototype=l.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,i(t,s,"GeneratorFunction")),t.prototype=Object.create(v),t}return u.prototype=d,i(v,"constructor",d),i(d,"constructor",u),u.displayName="GeneratorFunction",i(d,s,"GeneratorFunction"),i(v),i(v,s,"Generator"),i(v,a,function(){return this}),i(v,"toString",function(){return"[object Generator]"}),(r=function(){return{w:o,m:p}})()}function i(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}i=function(t,e,n,r){function s(e,n){i(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(s("next",0),s("throw",1),s("return",2))},i(t,e,n,r)}function a(t,e,n,r,i,a,s){try{var o=t[a](s),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(r,i)}function s(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(t){a(s,r,i,o,c,"next",t)}function c(t){a(s,r,i,o,c,"throw",t)}o(void 0)})}}const o={metaInfo:{title:"Store Collections Index"},data:function(){return{isLoading:!0,busy:!1,busyId:null,q:"",collections:[]}},computed:{sorted:function(){return this.collections.slice().sort(function(t,e){var n=null!=t.sort_order?t.sort_order:0,r=null!=e.sort_order?e.sort_order:0;return n!==r?n-r:String(t.title||"").localeCompare(String(e.title||""))})},filtered:function(){var t=(this.q||"").toLowerCase();return t?this.sorted.filter(function(e){return String(e.title||"").toLowerCase().includes(t)||String(e.slug||"").toLowerCase().includes(t)}):this.sorted}},mounted:function(){this.fetch()},methods:{makeToast:function(t,e,n){this.$root&&this.$root.$bvToast&&this.$root.$bvToast.toast(e,{title:n,variant:t,solid:!0})},displayLimit:function(t){return null!=t?t:8},fetch:function(){var t=this;return s(r().m(function e(){var n,i;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return t.isLoading=!0,e.p=1,e.n=2,axios.get("/admin/store/collections");case 2:n=e.v,i=n&&n.data&&Array.isArray(n.data.data)?n.data.data:n&&n.data?n.data:[],Array.isArray(i)||(i=[]),t.collections=i,e.n=4;break;case 3:e.p=3,e.v,t.makeToast("danger",t.$t("Failed_to_load"),t.$t("Failed"));case 4:return e.p=4,t.isLoading=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}))()},refresh:function(){this.fetch()},onSearch:function(){},displayOrder:function(t){return t+1},toggleActive:function(t){var e=this;return s(r().m(function n(){var i;return r().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,e.busyId=t.id,i=t.is_active?1:0,n.n=1,axios.put("/admin/store/collections/"+t.id,{is_active:i});case 1:e.makeToast("success",e.$t("Updated"),e.$t("Success")),n.n=3;break;case 2:n.p=2,n.v,t.is_active=!t.is_active,e.makeToast("danger",e.$t("InvalidData"),e.$t("Failed"));case 3:return n.p=3,e.busyId=null,n.f(3);case 4:return n.a(2)}},n,null,[[0,2,3,4]])}))()},move:function(t,e){if(!(t<0||t>=this.filtered.length)){var n=t+e;if(!(n<0||n>=this.filtered.length)){var r=this.filtered.slice(),i=r.splice(t,1)[0];r.splice(n,0,i),this.collections=r,this.persistOrder()}}},persistOrder:function(){var t=this;return s(r().m(function e(){var n,i,a,s;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t.collections.length){e.n=1;break}return e.a(2);case 1:t.busy=!0,e.p=2,n=[],i=0;case 3:if(!(i<t.collections.length)){e.n=6;break}if(a=t.collections[i],s=10*(i+1),a.sort_order!==s){e.n=4;break}return e.a(3,5);case 4:n.push(axios.put("/admin/store/collections/"+a.id,{sort_order:s}));case 5:i++,e.n=3;break;case 6:return e.n=7,Promise.all(n);case 7:return t.makeToast("success",t.$t("Order_saved"),t.$t("Success")),e.n=8,t.fetch();case 8:e.n=10;break;case 9:e.p=9,e.v,t.makeToast("danger",t.$t("Could_not_save_order"),t.$t("Failed"));case 10:return e.p=10,t.busy=!1,e.f(10);case 11:return e.a(2)}},e,null,[[2,9,10,11]])}))()},destroy:function(t){var e=this;return s(r().m(function n(){return r().w(function(n){for(;;)switch(n.p=n.n){case 0:if(confirm(e.$t("Confirm_Delete_This_Item"))){n.n=1;break}return n.a(2);case 1:return n.p=1,e.busyId=t.id,n.n=2,axios.delete("/admin/store/collections/"+t.id);case 2:e.makeToast("success",e.$t("Deleted_successfully"),e.$t("Success")),e.collections=e.collections.filter(function(e){return e.id!==t.id}),n.n=4;break;case 3:n.p=3,n.v,e.makeToast("danger",e.$t("Delete_failed"),e.$t("Failed"));case 4:return n.p=4,e.busyId=null,n.f(4);case 5:return n.a(2)}},n,null,[[1,3,4,5]])}))()}}};var c=n(85072),l=n.n(c),u=n(44439),d={insert:"head",singleton:!1};l()(u.A,d);u.A.locals;const f=(0,n(14486).A)(o,function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("breadcumb",{attrs:{page:t.$t("Collections"),folder:t.$t("Store")}}),t._v(" "),t.isLoading?e("div",{staticClass:"loading_page spinner spinner-primary mr-3"}):e("b-card",[e("div",{staticClass:"d-flex align-items-center justify-content-between flex-wrap mb-3"},[e("div",{staticClass:"d-flex align-items-center"},[e("b-input-group",[e("b-input-group-prepend",{attrs:{"is-text":""}},[e("i",{staticClass:"i-Search-People"})]),t._v(" "),e("b-form-input",{attrs:{placeholder:t.$t("Search")+"…"},on:{input:t.onSearch},model:{value:t.q,callback:function(e){t.q="string"==typeof e?e.trim():e},expression:"q"}}),t._v(" "),e("b-input-group-append",[e("b-button",{attrs:{variant:"outline-secondary",disabled:t.busy},on:{click:t.refresh}},[e("i",{staticClass:"i-Reload"})])],1)],1)],1),t._v(" "),e("div",{staticClass:"mt-2 mt-md-0"},[e("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"StoreCollectionsCreate"}}},[e("i",{staticClass:"i-Add"}),t._v(" "+t._s(t.$t("New"))+"\n        ")])],1)]),t._v(" "),e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-hover align-middle"},[e("thead",{staticClass:"thead-light"},[e("tr",[e("th",{staticStyle:{width:"70px"}},[t._v("#")]),t._v(" "),e("th",[t._v(t._s(t.$t("Title")))]),t._v(" "),e("th",{staticClass:"d-none d-md-table-cell"},[t._v(t._s(t.$t("Slug")))]),t._v(" "),e("th",{staticClass:"text-center d-none d-md-table-cell",staticStyle:{width:"120px"}},[t._v(t._s(t.$t("Limit")))]),t._v(" "),e("th",{staticClass:"text-center d-none d-lg-table-cell",staticStyle:{width:"120px"}},[t._v(t._s(t.$t("Products")))]),t._v(" "),e("th",{staticClass:"text-right",staticStyle:{width:"300px"}},[t._v(t._s(t.$t("Actions")))])])]),t._v(" "),e("tbody",[t._l(t.filtered,function(n,r){return e("tr",{key:n.id},[e("td",{staticClass:"text-muted"},[e("code",{staticClass:"small"},[t._v("#"+t._s(t.displayOrder(r)))])]),t._v(" "),e("td",[e("div",{staticClass:"fw-600"},[t._v(t._s(n.title))]),t._v(" "),n.description?e("div",{staticClass:"text-muted small",staticStyle:{"max-width":"520px"}},[t._v("\n                "+t._s(n.description)+"\n              ")]):t._e()]),t._v(" "),e("td",{staticClass:"d-none d-md-table-cell"},[e("span",{staticClass:"badge badge-outline-secondary"},[t._v(t._s(n.slug))])]),t._v(" "),e("td",{staticClass:"text-center d-none d-md-table-cell"},[t._v("\n              "+t._s(t.displayLimit(n.limit))+"\n            ")]),t._v(" "),e("td",{staticClass:"text-center d-none d-lg-table-cell"},[e("span",{staticClass:"badge badge-pill badge-light"},[t._v("\n                "+t._s(null!=n.products_count?n.products_count:"—")+"\n              ")])]),t._v(" "),e("td",{staticClass:"text-right"},[e("div",{staticClass:"btn-group btn-group-sm"},[e("router-link",{staticClass:"btn btn-outline-primary btn-sm",class:{disabled:t.busy},attrs:{to:{name:"StoreCollectionsEdit",params:{id:n.id}},title:"Edit"}},[e("i",{staticClass:"i-Pen-2"})]),t._v(" "),e("b-button",{attrs:{variant:"outline-danger",disabled:t.busyId===n.id,title:"Delete"},on:{click:function(e){return t.destroy(n)}}},[e("i",{staticClass:"i-Close"})])],1)])])}),t._v(" "),t.filtered.length?t._e():e("tr",[e("td",{staticClass:"text-center text-muted py-4",attrs:{colspan:"6"}},[t._v("\n              "+t._s(t.$t("No_items"))+"\n            ")])])],2)])])])],1)},[],!1,null,"57345dca",null).exports},85072:(t,e,n)=>{var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),s=[];function o(t){for(var e=-1,n=0;n<s.length;n++)if(s[n].identifier===t){e=n;break}return e}function c(t,e){for(var n={},r=[],i=0;i<t.length;i++){var a=t[i],c=e.base?a[0]+e.base:a[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var d=o(u),f={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(s[d].references++,s[d].updater(f)):s.push({identifier:u,updater:b(f,e),references:1}),r.push(u)}return r}function l(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach(function(t){e.setAttribute(t,r[t])}),"function"==typeof t.insert)t.insert(e);else{var s=a(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function f(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=d(e,i);else{var a=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(a,s[e]):t.appendChild(a)}}function v(t,e,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var p=null,h=0;function b(t,e){var n,r,i;if(e.singleton){var a=h++;n=p||(p=l(e)),r=f.bind(null,n,a,!1),i=f.bind(null,n,a,!0)}else n=l(e),r=v.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=i());var n=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=o(n[r]);s[i].references--}for(var a=c(t,e),l=0;l<n.length;l++){var u=o(n[l]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}n=a}}}}}]);